# =============================================================================
# Group Variables for Bastion Hosts (_bastion group)
# =============================================================================
# These variables apply to all hosts in the "_bastion" group, which are
# dynamically discovered via the aws_ec2 inventory plugin based on the
# "Role: bastion" tag.
#
# The bastion host acts as an SSH jump server, runs Ansible tasks that
# require VPC-internal access (RDS setup, ECS operations), and hosts Locust
# for load testing.
#
# Note: Shared variables (prefix_v, region_v, keypair_v, owner_v) are defined
# in group_vars/all.yaml to ensure consistency across all hosts.
# =============================================================================

# -----------------------------------------------------------------------------
# SSH Connection Settings
# -----------------------------------------------------------------------------
# ansible_user: The SSH username for connecting to bastion hosts.
#               Ubuntu AMIs use 'ubuntu', Amazon Linux uses 'ec2-user'.
ansible_user: ubuntu

# ansible_ssh_private_key_file: Path to the private key file for SSH access.
#                               Must correspond to the keypair_v specified
#                               in group_vars/all.yaml.
ansible_ssh_private_key_file: ~/.ssh/jps.pem

# -----------------------------------------------------------------------------
# AWS Credentials for Bastion Operations
# -----------------------------------------------------------------------------
# These credentials are used by the bastion host when running AWS operations
# (EFS, RDS, ECS, Secrets Manager, etc.). The bastion uses these to interact
# with AWS services from within the VPC.
#
# access_key_v: AWS Access Key ID. Retrieved from environment variable to
#               avoid storing credentials in version control.
access_key_v: "{{ lookup('env', 'AWS_ACCESS_KEY_ID') }}"

# secret_key_v: AWS Secret Access Key. Retrieved from environment variable.
secret_key_v: "{{ lookup('env', 'AWS_SECRET_ACCESS_KEY') }}"

# -----------------------------------------------------------------------------
# MCP ContextForge Configuration
# -----------------------------------------------------------------------------
# gateway_replicas: Number of MCP Gateway replicas to run.
#                   Default is 3 for load testing. Adjust based on expected load.
gateway_replicas: 3

# -----------------------------------------------------------------------------
# Application Domain Configuration
# -----------------------------------------------------------------------------
# mcf_domain: The base domain name for the MCP ContextForge application.
#             A subdomain will be created as: <prefix_v>.<mcf_domain>
#             The parent domain must be managed in Route 53.
mcf_domain: "mcf.stochastic-parrot.ie"

# ca_certificate_arn: ARN of the ACM certificate for HTTPS on the ALB.
#                     Must be a valid certificate in the deployment region that
#                     covers the target domain (e.g., *.mcf.example.com).
#                     Create via: aws acm request-certificate
ca_certificate_arn: "arn:aws:acm:eu-west-1:179757322917:certificate/0012604b-1316-4543-91c8-10ecfd18b55f"

# -----------------------------------------------------------------------------
# Container Image Tags
# -----------------------------------------------------------------------------
# Pin the version of the container images to be used. Use 'latest' for the
# most recent build, or specify a specific tag for reproducible deployments.
#
gateway_image_tag_v: latest
nginx_image_tag_v: latest

# -----------------------------------------------------------------------------
# Load Testing Configuration
# -----------------------------------------------------------------------------
# Locust load testing settings for the bastion host.
# Access via SSH tunnel: ssh -L 8089:localhost:8089 ubuntu@<bastion-ip>
#
locust_users: 1000
locust_spawn_rate: 50
locust_run_time: "10m"
