<!DOCTYPE html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="MCP Gateway Documentation"><meta name=author content="Mihai Criveti"><link href=https://pages.github.com/ibm/mcp-context-forge/manage/sso-entra-role-mapping/ rel=canonical><link href=../sso-microsoft-entra-id-tutorial/ rel=prev><link href=../sso-keycloak-tutorial/ rel=next><link rel=alternate type=application/rss+xml title="RSS feed" href=../../feed_rss_created.xml><link rel=alternate type=application/rss+xml title="RSS feed of updated content" href=../../feed_rss_updated.xml><link rel=icon href=../../favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>Microsoft EntraID Role and Group Claim Mapping - MCP Context Forge - Model Context Protocol Gateway</title><link rel=stylesheet href=../../assets/stylesheets/main.618322db.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><script src=../../assets/javascripts/glightbox.min.js></script><style id=glightbox-style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#microsoft-entraid-role-and-group-claim-mapping class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="MCP Context Forge - Model Context Protocol Gateway" class="md-header__button md-logo" aria-label="MCP Context Forge - Model Context Protocol Gateway" data-md-component=logo> <img src=../../logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> MCP Context Forge - Model Context Protocol Gateway </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Microsoft EntraID Role and Group Claim Mapping </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ibm/mcp-context-forge title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class=md-source__repository> ibm/mcp-context-forge </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> üè† Home </a> </li> <li class=md-tabs__item> <a href=../../overview/ class=md-tabs__link> üß≠ Overview </a> </li> <li class=md-tabs__item> <a href=../../using/ class=md-tabs__link> üß∞ Use </a> </li> <li class=md-tabs__item> <a href=../../deployment/ class=md-tabs__link> üöÄ Deploy </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> üõ°Ô∏è Manage </a> </li> <li class=md-tabs__item> <a href=../../development/ class=md-tabs__link> üíª Develop </a> </li> <li class=md-tabs__item> <a href=../../testing/ class=md-tabs__link> üß™ Test </a> </li> <li class=md-tabs__item> <a href=../../architecture/ class=md-tabs__link> üìê Design &amp; Roadmap </a> </li> <li class=md-tabs__item> <a href=../../media/ class=md-tabs__link> üì∞ Media </a> </li> <li class=md-tabs__item> <a href=../../tutorials/ class=md-tabs__link> üìñ Tutorials </a> </li> <li class=md-tabs__item> <a href=../../best-practices/selecting-an-mcp-gateway/ class=md-tabs__link> ‚≠ê Best Practices </a> </li> <li class=md-tabs__item> <a href=../../faq/ class=md-tabs__link> ‚ùì FAQ </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="MCP Context Forge - Model Context Protocol Gateway" class="md-nav__button md-logo" aria-label="MCP Context Forge - Model Context Protocol Gateway" data-md-component=logo> <img src=../../logo.png alt=logo> </a> MCP Context Forge - Model Context Protocol Gateway </label> <div class=md-nav__source> <a href=https://github.com/ibm/mcp-context-forge title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class=md-source__repository> ibm/mcp-context-forge </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> üè† Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../overview/ class="md-nav__link "> <span class=md-ellipsis> üß≠ Overview </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> üß≠ Overview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/quick_start/ class=md-nav__link> <span class=md-ellipsis> üöÄ Quick Start </span> <span class="md-status md-status--draft"></span> </a> </li> <li class=md-nav__item> <a href=../../overview/features/ class=md-nav__link> <span class=md-ellipsis> ‚ú® Features Overview </span> </a> </li> <li class=md-nav__item> <a href=../../overview/ui/ class=md-nav__link> <span class=md-ellipsis> Admin UI </span> </a> </li> <li class=md-nav__item> <a href=../../overview/ui-concepts/ class=md-nav__link> <span class=md-ellipsis> Admin Console Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../overview/passthrough/ class=md-nav__link> <span class=md-ellipsis> HTTP Header Passthrough </span> </a> </li> <li class=md-nav__item> <a href=../../overview/tags/ class=md-nav__link> <span class=md-ellipsis> üè∑Ô∏è Tags System </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../using/ class="md-nav__link "> <span class=md-ellipsis> üß∞ Use </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> üß∞ Use </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/mcpgateway-wrapper/ class=md-nav__link> <span class=md-ellipsis> üõ† STDIO Wrapper (mcpgateway.wrapper) </span> </a> </li> <li class=md-nav__item> <a href=../../using/mcpgateway-translate/ class=md-nav__link> <span class=md-ellipsis> MCP Gateway Transport Bridge (mcpgateway.translate) </span> </a> </li> <li class=md-nav__item> <a href=../../using/reverse-proxy/ class=md-nav__link> <span class=md-ellipsis> MCP Reverse Proxy </span> </a> </li> <li class=md-nav__item> <a href=../../using/multi-auth-headers/ class=md-nav__link> <span class=md-ellipsis> Multiple Authentication Headers </span> </a> </li> <li class=md-nav__item> <a href=../../using/query-param-auth/ class=md-nav__link> <span class=md-ellipsis> Query Parameter Authentication </span> </a> </li> <li class=md-nav__item> <a href=../../using/tool-annotations/ class=md-nav__link> <span class=md-ellipsis> Tool Annotations </span> </a> </li> <li class=md-nav__item> <a href=../../using/rest-passthrough/ class=md-nav__link> <span class=md-ellipsis> REST Passthrough Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../using/grpc-services/ class=md-nav__link> <span class=md-ellipsis> gRPC Services (Experimental) </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_10> <div class="md-nav__link md-nav__container"> <a href=../../using/clients/ class="md-nav__link "> <span class=md-ellipsis> Clients </span> </a> <label class="md-nav__link " for=__nav_3_10 id=__nav_3_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_10_label aria-expanded=false> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> Clients </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/clients/mcp-inspector/ class=md-nav__link> <span class=md-ellipsis> MCP Inspector </span> </a> </li> <li class=md-nav__item> <a href=../../using/clients/claude-desktop/ class=md-nav__link> <span class=md-ellipsis> Claude Desktop √ó MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/clients/copilot/ class=md-nav__link> <span class=md-ellipsis> üß† GitHub Copilot + MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/clients/cline/ class=md-nav__link> <span class=md-ellipsis> Cline (VS Code Extension) </span> </a> </li> <li class=md-nav__item> <a href=../../using/clients/continue/ class=md-nav__link> <span class=md-ellipsis> Continue (VS Code Extension) </span> </a> </li> <li class=md-nav__item> <a href=../../using/clients/openwebui/ class=md-nav__link> <span class=md-ellipsis> OpenWebUI Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/clients/mcp-cli/ class=md-nav__link> <span class=md-ellipsis> üñ•Ô∏è MCP CLI + MCP Context Forge Gateway </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_11> <div class="md-nav__link md-nav__container"> <a href=../../using/agents/ class="md-nav__link "> <span class=md-ellipsis> Agents </span> </a> <label class="md-nav__link " for=__nav_3_11 id=__nav_3_11_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_11_label aria-expanded=false> <label class=md-nav__title for=__nav_3_11> <span class="md-nav__icon md-icon"></span> Agents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/agents/a2a/ class=md-nav__link> <span class=md-ellipsis> A2A (Agent-to-Agent) Integration </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/langchain/ class=md-nav__link> <span class=md-ellipsis> LangChain Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/langgraph/ class=md-nav__link> <span class=md-ellipsis> LangGraph Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/crewai/ class=md-nav__link> <span class=md-ellipsis> CrewAI Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/bee/ class=md-nav__link> <span class=md-ellipsis> Bee Agent Framework Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/autogen/ class=md-nav__link> <span class=md-ellipsis> AutoGen Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/semantic-kernel/ class=md-nav__link> <span class=md-ellipsis> Semantic Kernel Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/openai-sdk/ class=md-nav__link> <span class=md-ellipsis> OpenAI Agents SDK + MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/llamaindex/ class=md-nav__link> <span class=md-ellipsis> LlamaIndex Integration with MCP Gateway </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12> <div class="md-nav__link md-nav__container"> <a href=../../using/servers/ class="md-nav__link "> <span class=md-ellipsis> MCP Servers </span> </a> <label class="md-nav__link " for=__nav_3_12 id=__nav_3_12_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_12_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12> <span class="md-nav__icon md-icon"></span> MCP Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_2> <label class=md-nav__link for=__nav_3_12_2 id=__nav_3_12_2_label tabindex=0> <span class=md-ellipsis> Go Servers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_12_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_2> <span class="md-nav__icon md-icon"></span> Go Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/go/calculator-server/ class=md-nav__link> <span class=md-ellipsis> Go Calculator Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/go/fast-time-server/ class=md-nav__link> <span class=md-ellipsis> Go Fast Time Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/go/pandoc-server/ class=md-nav__link> <span class=md-ellipsis> Pandoc Server </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_3> <label class=md-nav__link for=__nav_3_12_3 id=__nav_3_12_3_label tabindex=0> <span class=md-ellipsis> Python Servers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_12_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_3> <span class="md-nav__icon md-icon"></span> Python Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/python/chunker-server/ class=md-nav__link> <span class=md-ellipsis> Chunker Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/code-splitter-server/ class=md-nav__link> <span class=md-ellipsis> Code Splitter Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/csv-pandas-chat-server/ class=md-nav__link> <span class=md-ellipsis> CSV Pandas Chat Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/data-analysis-server/ class=md-nav__link> <span class=md-ellipsis> Python Data Analysis Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/docx-server/ class=md-nav__link> <span class=md-ellipsis> DOCX Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/eval-server/ class=md-nav__link> <span class=md-ellipsis> Python MCP Evaluation Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/graphviz-server/ class=md-nav__link> <span class=md-ellipsis> Graphviz Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/latex-server/ class=md-nav__link> <span class=md-ellipsis> LaTeX Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/libreoffice-server/ class=md-nav__link> <span class=md-ellipsis> LibreOffice Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/mermaid-server/ class=md-nav__link> <span class=md-ellipsis> Mermaid Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/plotly-server/ class=md-nav__link> <span class=md-ellipsis> Plotly Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/pptx-server/ class=md-nav__link> <span class=md-ellipsis> Python PowerPoint (PPTX) Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/python-sandbox-server/ class=md-nav__link> <span class=md-ellipsis> Python Sandbox Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/url-to-markdown-server/ class=md-nav__link> <span class=md-ellipsis> URL to Markdown Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/xlsx-server/ class=md-nav__link> <span class=md-ellipsis> XLSX Server </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_4> <label class=md-nav__link for=__nav_3_12_4 id=__nav_3_12_4_label tabindex=0> <span class=md-ellipsis> External Servers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_12_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_4> <span class="md-nav__icon md-icon"></span> External Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_4_1> <label class=md-nav__link for=__nav_3_12_4_1 id=__nav_3_12_4_1_label tabindex=0> <span class=md-ellipsis> GitHub Copilot </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_12_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_4_1> <span class="md-nav__icon md-icon"></span> GitHub Copilot </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/external/microsoft/github/ class=md-nav__link> <span class=md-ellipsis> GitHub MCP Server </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_4_2> <label class=md-nav__link for=__nav_3_12_4_2 id=__nav_3_12_4_2_label tabindex=0> <span class=md-ellipsis> Box </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_12_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_4_2> <span class="md-nav__icon md-icon"></span> Box </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/external/box/box/ class=md-nav__link> <span class=md-ellipsis> Box MCP Server </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_4_3> <label class=md-nav__link for=__nav_3_12_4_3 id=__nav_3_12_4_3_label tabindex=0> <span class=md-ellipsis> monday.com </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_12_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_4_3> <span class="md-nav__icon md-icon"></span> monday.com </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/external/monday/monday-mcp/ class=md-nav__link> <span class=md-ellipsis> monday.com MCP Server </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_4_4> <div class="md-nav__link md-nav__container"> <a href=../../using/servers/external/open/ class="md-nav__link "> <span class=md-ellipsis> Open Servers </span> </a> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_12_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_4_4> <span class="md-nav__icon md-icon"></span> Open Servers </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_5> <label class=md-nav__link for=__nav_3_12_5 id=__nav_3_12_5_label tabindex=0> <span class=md-ellipsis> IBM Servers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_12_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_5> <span class="md-nav__icon md-icon"></span> IBM Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/ibm/instana/ class=md-nav__link> <span class=md-ellipsis> IBM Instana MCP Server </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_6> <label class=md-nav__link for=__nav_3_12_6 id=__nav_3_12_6_label tabindex=0> <span class=md-ellipsis> Hashicorp Servers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_12_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_6> <span class="md-nav__icon md-icon"></span> Hashicorp Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/hashicorp/terraform/ class=md-nav__link> <span class=md-ellipsis> Terraform MCP Server </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_13> <div class="md-nav__link md-nav__container"> <a href=../../using/plugins/ class="md-nav__link "> <span class=md-ellipsis> Plugins </span> </a> <label class="md-nav__link " for=__nav_3_13 id=__nav_3_13_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_13_label aria-expanded=false> <label class=md-nav__title for=__nav_3_13> <span class="md-nav__icon md-icon"></span> Plugins </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/plugins/lifecycle/ class=md-nav__link> <span class=md-ellipsis> Plugin Lifecycle </span> </a> </li> <li class=md-nav__item> <a href=../../using/plugins/plugins/ class=md-nav__link> <span class=md-ellipsis> Available Plugins </span> </a> </li> <li class=md-nav__item> <a href=../../using/plugins/http-auth-hooks/ class=md-nav__link> <span class=md-ellipsis> HTTP Authentication Hooks </span> </a> </li> <li class=md-nav__item> <a href=../../using/plugins/mtls/ class=md-nav__link> <span class=md-ellipsis> External Plugin mTLS Setup Guide </span> </a> </li> <li class=md-nav__item> <a href=../../using/plugins/rust-plugins/ class=md-nav__link> <span class=md-ellipsis> Rust Plugins - High-Performance Native Extensions </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../deployment/ class="md-nav__link "> <span class=md-ellipsis> üöÄ Deploy </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> üöÄ Deploy </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../deployment/local/ class=md-nav__link> <span class=md-ellipsis> üêç Local Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/container/ class=md-nav__link> <span class=md-ellipsis> üì¶ Container Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/compose/ class=md-nav__link> <span class=md-ellipsis> üß© Docker Compose </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/kubernetes/ class=md-nav__link> <span class=md-ellipsis> ‚ò∏Ô∏è Kubernetes / OpenShift Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/openshift/ class=md-nav__link> <span class=md-ellipsis> ‚ú® Red Hat OpenShift </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/minikube/ class=md-nav__link> <span class=md-ellipsis> ‚ö°Ô∏è Minikube </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/helm/ class=md-nav__link> <span class=md-ellipsis> üöÄ Deploying the MCP Gateway Stack with Helm </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/argocd/ class=md-nav__link> <span class=md-ellipsis> üö¢ Deploying the MCP Gateway Stack with Argo CD </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/google-cloud-run/ class=md-nav__link> <span class=md-ellipsis> ‚òÅÔ∏è Deploying MCP Gateway on Google Cloud Run </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/ibm-code-engine/ class=md-nav__link> <span class=md-ellipsis> ‚öôÔ∏è IBM Code Engine </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/aws/ class=md-nav__link> <span class=md-ellipsis> üüß AWS </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/azure/ class=md-nav__link> <span class=md-ellipsis> üî∑ Azure </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/fly-io/ class=md-nav__link> <span class=md-ellipsis> ‚öôÔ∏è Fly.io Deployment Guide for MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/proxy-auth/ class=md-nav__link> <span class=md-ellipsis> Proxy Authentication </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/cforge-gateway/ class=md-nav__link> <span class=md-ellipsis> cforge gateway - Deployment Tool </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> üõ°Ô∏è Manage </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> üõ°Ô∏è Manage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration Reference </span> </a> </li> <li class=md-nav__item> <a href=../api-usage/ class=md-nav__link> <span class=md-ellipsis> API Usage Guide </span> </a> </li> <li class=md-nav__item> <a href=../scale/ class=md-nav__link> <span class=md-ellipsis> Scaling MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../parallel-session-cleanup/ class=md-nav__link> <span class=md-ellipsis> Parallel Session Cleanup with asyncio.gather() </span> </a> </li> <li class=md-nav__item> <a href=../tuning/ class=md-nav__link> <span class=md-ellipsis> Gateway Tuning Guide </span> </a> </li> <li class=md-nav__item> <a href=../backup/ class=md-nav__link> <span class=md-ellipsis> Backups </span> </a> </li> <li class=md-nav__item> <a href=../catalog/ class=md-nav__link> <span class=md-ellipsis> MCP Server Catalog </span> </a> </li> <li class=md-nav__item> <a href=../bulk-import/ class=md-nav__link> <span class=md-ellipsis> Bulk Import Tools </span> </a> </li> <li class=md-nav__item> <a href=../metadata-tracking/ class=md-nav__link> <span class=md-ellipsis> üìä Metadata Tracking &amp; Audit Trails </span> </a> </li> <li class=md-nav__item> <a href=../export-import/ class=md-nav__link> <span class=md-ellipsis> Configuration Export &amp; Import </span> </a> </li> <li class=md-nav__item> <a href=../export-import-tutorial/ class=md-nav__link> <span class=md-ellipsis> Export/Import Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../export-import-reference/ class=md-nav__link> <span class=md-ellipsis> Export/Import Quick Reference </span> </a> </li> <li class=md-nav__item> <a href=../logging/ class=md-nav__link> <span class=md-ellipsis> Logging </span> </a> </li> <li class=md-nav__item> <a href=../logging-examples/ class=md-nav__link> <span class=md-ellipsis> Logging Examples for MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../observability/ class=md-nav__link> <span class=md-ellipsis> Observability </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_17> <label class=md-nav__link for=__nav_5_17 id=__nav_5_17_label tabindex=0> <span class=md-ellipsis> Observability </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_17_label aria-expanded=false> <label class=md-nav__title for=__nav_5_17> <span class="md-nav__icon md-icon"></span> Observability </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../observability/observability/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../observability/internal-observability/ class=md-nav__link> <span class=md-ellipsis> Internal Observability </span> </a> </li> <li class=md-nav__item> <a href=../observability/phoenix/ class=md-nav__link> <span class=md-ellipsis> Phoenix Integration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../proxy/ class=md-nav__link> <span class=md-ellipsis> Proxy Authentication </span> </a> </li> <li class=md-nav__item> <a href=../dcr/ class=md-nav__link> <span class=md-ellipsis> Dynamic Client Registration (DCR) </span> </a> </li> <li class=md-nav__item> <a href=../oauth/ class=md-nav__link> <span class=md-ellipsis> OAuth 2.0 Integration </span> </a> </li> <li class=md-nav__item> <a href=../oauth-troubleshooting/ class=md-nav__link> <span class=md-ellipsis> OAuth Troubleshooting Guide </span> </a> </li> <li class=md-nav__item> <a href=../securing/ class=md-nav__link> <span class=md-ellipsis> Securing MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../sso/ class=md-nav__link> <span class=md-ellipsis> Single Sign-On (SSO) Authentication </span> </a> </li> <li class=md-nav__item> <a href=../sso-github-tutorial/ class=md-nav__link> <span class=md-ellipsis> GitHub SSO Setup Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../sso-google-tutorial/ class=md-nav__link> <span class=md-ellipsis> Google OAuth/OIDC Setup Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../sso-ibm-tutorial/ class=md-nav__link> <span class=md-ellipsis> IBM Security Verify Setup Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../sso-microsoft-entra-id-tutorial/ class=md-nav__link> <span class=md-ellipsis> Microsoft Entra ID OIDC Setup Tutorial </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Microsoft EntraID Role and Group Claim Mapping </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Microsoft EntraID Role and Group Claim Mapping </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#features class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> <li class=md-nav__item> <a href=#architecture class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> <nav class=md-nav aria-label=Architecture> <ul class=md-nav__list> <li class=md-nav__item> <a href=#role-system class=md-nav__link> <span class=md-ellipsis> Role System </span> </a> </li> <li class=md-nav__item> <a href=#implementation-components class=md-nav__link> <span class=md-ellipsis> Implementation Components </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-entraid-app-registration-setup class=md-nav__link> <span class=md-ellipsis> 1. EntraID App Registration Setup </span> </a> </li> <li class=md-nav__item> <a href=#2-environment-variables class=md-nav__link> <span class=md-ellipsis> 2. Environment Variables </span> </a> </li> <li class=md-nav__item> <a href=#3-provider-metadata-database-configuration class=md-nav__link> <span class=md-ellipsis> 3. Provider Metadata (Database Configuration) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#usage-examples class=md-nav__link> <span class=md-ellipsis> Usage Examples </span> </a> <nav class=md-nav aria-label="Usage Examples"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-1-using-app-roles-recommended class=md-nav__link> <span class=md-ellipsis> Example 1: Using App Roles (Recommended) </span> </a> </li> <li class=md-nav__item> <a href=#example-2-using-security-groups-object-ids class=md-nav__link> <span class=md-ellipsis> Example 2: Using Security Groups (Object IDs) </span> </a> </li> <li class=md-nav__item> <a href=#example-3-mixed-approach class=md-nav__link> <span class=md-ellipsis> Example 3: Mixed Approach </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#role-synchronization class=md-nav__link> <span class=md-ellipsis> Role Synchronization </span> </a> <nav class=md-nav aria-label="Role Synchronization"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#on-user-creation class=md-nav__link> <span class=md-ellipsis> On User Creation </span> </a> </li> <li class=md-nav__item> <a href=#on-user-login class=md-nav__link> <span class=md-ellipsis> On User Login </span> </a> </li> <li class=md-nav__item> <a href=#manual-role-management class=md-nav__link> <span class=md-ellipsis> Manual Role Management </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#token-claims class=md-nav__link> <span class=md-ellipsis> Token Claims </span> </a> <nav class=md-nav aria-label="Token Claims"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#groups-claim-formats class=md-nav__link> <span class=md-ellipsis> Groups Claim Formats </span> </a> </li> <li class=md-nav__item> <a href=#token-size-considerations class=md-nav__link> <span class=md-ellipsis> Token Size Considerations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#security-considerations class=md-nav__link> <span class=md-ellipsis> Security Considerations </span> </a> <nav class=md-nav aria-label="Security Considerations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#group-id-vs-name-mapping class=md-nav__link> <span class=md-ellipsis> Group ID vs Name Mapping </span> </a> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#issue-users-not-getting-roles class=md-nav__link> <span class=md-ellipsis> Issue: Users not getting roles </span> </a> </li> <li class=md-nav__item> <a href=#issue-admin-users-not-getting-admin-access class=md-nav__link> <span class=md-ellipsis> Issue: Admin users not getting admin access </span> </a> </li> <li class=md-nav__item> <a href=#issue-roles-not-syncing-on-login class=md-nav__link> <span class=md-ellipsis> Issue: Roles not syncing on login </span> </a> </li> <li class=md-nav__item> <a href=#issue-group-overage-user-has-too-many-groups class=md-nav__link> <span class=md-ellipsis> Issue: Group overage - user has too many groups </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#migration-guide class=md-nav__link> <span class=md-ellipsis> Migration Guide </span> </a> <nav class=md-nav aria-label="Migration Guide"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#migrating-from-admin-only-to-rbac class=md-nav__link> <span class=md-ellipsis> Migrating from Admin-Only to RBAC </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#api-reference class=md-nav__link> <span class=md-ellipsis> API Reference </span> </a> <nav class=md-nav aria-label="API Reference"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration-fields class=md-nav__link> <span class=md-ellipsis> Configuration Fields </span> </a> </li> <li class=md-nav__item> <a href=#methods class=md-nav__link> <span class=md-ellipsis> Methods </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#comparison-with-other-providers class=md-nav__link> <span class=md-ellipsis> Comparison with Other Providers </span> </a> </li> <li class=md-nav__item> <a href=#future-enhancements class=md-nav__link> <span class=md-ellipsis> Future Enhancements </span> </a> </li> <li class=md-nav__item> <a href=#design-decisions class=md-nav__link> <span class=md-ellipsis> Design Decisions </span> </a> <nav class=md-nav aria-label="Design Decisions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#admin-status-synchronization class=md-nav__link> <span class=md-ellipsis> Admin Status Synchronization </span> </a> </li> <li class=md-nav__item> <a href=#configuration-precedence-bootstrap class=md-nav__link> <span class=md-ellipsis> Configuration Precedence (Bootstrap) </span> </a> </li> <li class=md-nav__item> <a href=#id-token-trust-model class=md-nav__link> <span class=md-ellipsis> ID Token Trust Model </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> <span class=md-ellipsis> References </span> </a> </li> <li class=md-nav__item> <a href=#support class=md-nav__link> <span class=md-ellipsis> Support </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../sso-keycloak-tutorial/ class=md-nav__link> <span class=md-ellipsis> Keycloak OIDC Setup Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../sso-okta-tutorial/ class=md-nav__link> <span class=md-ellipsis> Okta OIDC Setup Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../sso-generic-oidc-tutorial/ class=md-nav__link> <span class=md-ellipsis> Generic OIDC Provider Setup Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../rbac/ class=md-nav__link> <span class=md-ellipsis> RBAC Configuration </span> </a> </li> <li class=md-nav__item> <a href=../teams/ class=md-nav__link> <span class=md-ellipsis> Team Management </span> </a> </li> <li class=md-nav__item> <a href=../ui-customization/ class=md-nav__link> <span class=md-ellipsis> Customizing the Admin UI </span> </a> </li> <li class=md-nav__item> <a href=../upgrade/ class=md-nav__link> <span class=md-ellipsis> Upgrading MCP Gateway and Managing Database Migrations </span> </a> </li> <li class=md-nav__item> <a href=../well-known-uris/ class=md-nav__link> <span class=md-ellipsis> Well-Known URI Configuration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <div class="md-nav__link md-nav__container"> <a href=../../development/ class="md-nav__link "> <span class=md-ellipsis> üíª Develop </span> </a> <label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> üíª Develop </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../development/developer-onboarding/ class=md-nav__link> <span class=md-ellipsis> ‚úÖ Developer Onboarding Checklist </span> </a> </li> <li class=md-nav__item> <a href=../../development/mcp-developer-guide-json-rpc/ class=md-nav__link> <span class=md-ellipsis> MCP JSON RPC Guide </span> </a> </li> <li class=md-nav__item> <a href=../../development/github/ class=md-nav__link> <span class=md-ellipsis> GitHub Workflow Guide </span> </a> </li> <li class=md-nav__item> <a href=../../development/building/ class=md-nav__link> <span class=md-ellipsis> Building Locally </span> </a> </li> <li class=md-nav__item> <a href=../../development/documentation/ class=md-nav__link> <span class=md-ellipsis> Writing &amp; Publishing Documentation </span> </a> </li> <li class=md-nav__item> <a href=../../development/review/ class=md-nav__link> <span class=md-ellipsis> Reviewing a Pull Request </span> </a> </li> <li class=md-nav__item> <a href=../../development/packaging/ class=md-nav__link> <span class=md-ellipsis> Packaging &amp; Distribution </span> </a> </li> <li class=md-nav__item> <a href=../../development/developer-workstation/ class=md-nav__link> <span class=md-ellipsis> Developer Workstation </span> </a> </li> <li class=md-nav__item> <a href=../../development/doctest-coverage/ class=md-nav__link> <span class=md-ellipsis> Doctest Coverage </span> </a> </li> <li class=md-nav__item> <a href=../../development/module-documentation/ class=md-nav__link> <span class=md-ellipsis> Module documentation </span> </a> </li> <li class=md-nav__item> <a href=../../development/db-performance/ class=md-nav__link> <span class=md-ellipsis> Database Performance Observability Guide </span> </a> </li> <li class=md-nav__item> <a href=../../development/profiling/ class=md-nav__link> <span class=md-ellipsis> Performance Profiling Guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <div class="md-nav__link md-nav__container"> <a href=../../testing/ class="md-nav__link "> <span class=md-ellipsis> üß™ Test </span> </a> <label class="md-nav__link " for=__nav_7 id=__nav_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> üß™ Test </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../testing/basic/ class=md-nav__link> <span class=md-ellipsis> MCP Gateway - Basic </span> </a> </li> <li class=md-nav__item> <a href=../../testing/performance/ class=md-nav__link> <span class=md-ellipsis> Performance Testing </span> </a> </li> <li class=md-nav__item> <a href=../../testing/acceptance/ class=md-nav__link> <span class=md-ellipsis> MCP Gateway Manual Acceptance Testing </span> </a> </li> <li class=md-nav__item> <a href=../../testing/fuzzing/ class=md-nav__link> <span class=md-ellipsis> Fuzz Testing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <div class="md-nav__link md-nav__container"> <a href=../../architecture/ class="md-nav__link "> <span class=md-ellipsis> üìê Design &amp; Roadmap </span> </a> <label class="md-nav__link " for=__nav_8 id=__nav_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> üìê Design &amp; Roadmap </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/roadmap/ class=md-nav__link> <span class=md-ellipsis> Roadmap </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/performance-architecture/ class=md-nav__link> <span class=md-ellipsis> Performance Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/security-features/ class=md-nav__link> <span class=md-ellipsis> Security Features </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/plugins/ class=md-nav__link> <span class=md-ellipsis> Plugin Framework </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/export-import-architecture/ class=md-nav__link> <span class=md-ellipsis> Export-Import Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/multitenancy/ class=md-nav__link> <span class=md-ellipsis> Multitenancy </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/oauth-design/ class=md-nav__link> <span class=md-ellipsis> OAuth </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/oauth-authorization-code-ui-design/ class=md-nav__link> <span class=md-ellipsis> OAuth UI </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_10> <div class="md-nav__link md-nav__container"> <a href=../../architecture/adr/ class="md-nav__link "> <span class=md-ellipsis> Decision Records </span> </a> <label class="md-nav__link " for=__nav_8_10 id=__nav_8_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_10_label aria-expanded=false> <label class=md-nav__title for=__nav_8_10> <span class="md-nav__icon md-icon"></span> Decision Records </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/adr/001-adopt-fastapi-pydantic/ class=md-nav__link> <span class=md-ellipsis> 1 Adopt FastAPI + Pydantic </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/002-use-async-sqlalchemy-orm/ class=md-nav__link> <span class=md-ellipsis> 2 Use Async SQLAlchemy ORM </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/003-expose-multi-transport-endpoints/ class=md-nav__link> <span class=md-ellipsis> 3 Expose Multi-Transport Endpoints </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/004-combine-jwt-and-basic-auth/ class=md-nav__link> <span class=md-ellipsis> 4 Combine JWT &amp; Basic Auth </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/005-structured-json-logging/ class=md-nav__link> <span class=md-ellipsis> 5 Structured JSON Logging </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/005-vscode-devcontainer-support/ class=md-nav__link> <span class=md-ellipsis> 5 VS Code Dev Container Support </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/006-gateway-tool-rate-limiting/ class=md-nav__link> <span class=md-ellipsis> 6 Gateway &amp; Tool-Level Rate Limiting </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/007-pluggable-cache-backend/ class=md-nav__link> <span class=md-ellipsis> 7 Pluggable Cache Backend </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/008-federation-discovery/ class=md-nav__link> <span class=md-ellipsis> 8 Federation &amp; Auto-Discovery via DNS-SD </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/009-built-in-health-checks/ class=md-nav__link> <span class=md-ellipsis> 9 Built-in Health Checks </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/010-observability-prometheus/ class=md-nav__link> <span class=md-ellipsis> 10 Observability via Prometheus </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/011-tool-federation/ class=md-nav__link> <span class=md-ellipsis> 11 Namespaced Tool Federation </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/012-dropdown-ui-tool-selection/ class=md-nav__link> <span class=md-ellipsis> 12 Drop-down tool selection </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/013-APIs-for-server-connection-strings/ class=md-nav__link> <span class=md-ellipsis> 13 APIs for server connection string </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/014-security-headers-cors-middleware/ class=md-nav__link> <span class=md-ellipsis> 14 Security Headers &amp; CORS Middleware </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/015-well-known-uri-handler/ class=md-nav__link> <span class=md-ellipsis> 15 Well-known URI Handler </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/016-plugin-framework-ai-middleware/ class=md-nav__link> <span class=md-ellipsis> 16 Plugin Framework &amp; AI Middleware </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/017-adopt-orjson-json-serialization/ class=md-nav__link> <span class=md-ellipsis> 17 Adopt orjson for High-Performance JSON </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/018-built-in-response-compression/ class=md-nav__link> <span class=md-ellipsis> 18 Built-in Response Compression </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/019-modular-architecture-split/ class=md-nav__link> <span class=md-ellipsis> 19 Modular Architecture Split (14 Modules) </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/020-multi-format-packaging-strategy/ class=md-nav__link> <span class=md-ellipsis> 20 Multi-Format Packaging Strategy </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/021-built-in-proxy-vs-service-mesh/ class=md-nav__link> <span class=md-ellipsis> 21 Built-in Proxy vs Service Mesh </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/022-elicitation-passthrough-implementation/ class=md-nav__link> <span class=md-ellipsis> 22 Elicitation Passthrough Implementation </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/023-one-time-authentication-servers/ class=md-nav__link> <span class=md-ellipsis> 23 One-Time Authentication Servers </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/024-uvicorn-standard-extras/ class=md-nav__link> <span class=md-ellipsis> 24 Uvicorn Standard Extras </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/025-granian-http-server/ class=md-nav__link> <span class=md-ellipsis> 25 Granian HTTP Server </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/026-hiredis-redis-parser/ class=md-nav__link> <span class=md-ellipsis> 26 Hiredis Redis Parser </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/027-migrate-psycopg3/ class=md-nav__link> <span class=md-ellipsis> 27 Migrate Psycopg3 </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/028-auth-caching/ class=md-nav__link> <span class=md-ellipsis> 28 Auth Caching </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/029-registry-admin-stats-caching/ class=md-nav__link> <span class=md-ellipsis> 29 Registry Admin Stats Caching </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/030-metrics-cleanup-rollup/ class=md-nav__link> <span class=md-ellipsis> 30 Metrics Cleanup Rollup </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/031-parallel-session-cleanup/ class=md-nav__link> <span class=md-ellipsis> 31 Parallel Session Cleanup </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/032-mcp-session-pool/ class=md-nav__link> <span class=md-ellipsis> 32 MCP Session Pool </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/033-tool-lookup-cache/ class=md-nav__link> <span class=md-ellipsis> 33 Tool Lookup Cache </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/034-sso-admin-sync-config-precedence/ class=md-nav__link> <span class=md-ellipsis> 34 SSO Admin Sync &amp; Config Precedence </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <div class="md-nav__link md-nav__container"> <a href=../../media/ class="md-nav__link "> <span class=md-ellipsis> üì∞ Media </span> </a> <label class="md-nav__link " for=__nav_9 id=__nav_9_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> üì∞ Media </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_2> <div class="md-nav__link md-nav__container"> <a href=../../media/kit/ class="md-nav__link "> <span class=md-ellipsis> Media Kit </span> </a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_2_label aria-expanded=false> <label class=md-nav__title for=__nav_9_2> <span class="md-nav__icon md-icon"></span> Media Kit </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_3> <div class="md-nav__link md-nav__container"> <a href=../../media/press/ class="md-nav__link "> <span class=md-ellipsis> Press </span> </a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_3_label aria-expanded=false> <label class=md-nav__title for=__nav_9_3> <span class="md-nav__icon md-icon"></span> Press </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_4> <div class="md-nav__link md-nav__container"> <a href=../../media/social/ class="md-nav__link "> <span class=md-ellipsis> Social </span> </a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_4_label aria-expanded=false> <label class=md-nav__title for=__nav_9_4> <span class="md-nav__icon md-icon"></span> Social </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10> <div class="md-nav__link md-nav__container"> <a href=../../tutorials/ class="md-nav__link "> <span class=md-ellipsis> üìñ Tutorials </span> </a> <label class="md-nav__link " for=__nav_10 id=__nav_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> üìñ Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/argocd-helm-deployment-ibm-cloud-iks/ class=md-nav__link> <span class=md-ellipsis> üöÄ Deploying the MCP Gateway Stack to IBM Cloud Kubernetes Service with Argo CD </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/openwebui-tutorial/ class=md-nav__link> <span class=md-ellipsis> OpenWebUI with Ollama, LiteLLM, MCPO, and MCP Gateway Deployment Guide </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/dcr-hyprmcp/ class=md-nav__link> <span class=md-ellipsis> Dynamic Client Registration with HyprMCP </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_11> <label class=md-nav__link for=__nav_11 id=__nav_11_label tabindex=0> <span class=md-ellipsis> ‚≠ê Best Practices </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_11_label aria-expanded=false> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> ‚≠ê Best Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../best-practices/selecting-an-mcp-gateway/ class=md-nav__link> <span class=md-ellipsis> Why use an MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/mcp-architecture-patterns/ class=md-nav__link> <span class=md-ellipsis> üìê MCP Architecture Patterns </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/mcp-best-practices/ class=md-nav__link> <span class=md-ellipsis> ‚≠ê Best Practices Guide </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/input-validation/ class=md-nav__link> <span class=md-ellipsis> üîí Input Validation </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/developing-your-mcp-server-python/ class=md-nav__link> <span class=md-ellipsis> üõ†Ô∏è Write an MCP Server in Python </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12> <div class="md-nav__link md-nav__container"> <a href=../../faq/ class="md-nav__link "> <span class=md-ellipsis> ‚ùì FAQ </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_12_label aria-expanded=false> <label class=md-nav__title for=__nav_12> <span class="md-nav__icon md-icon"></span> ‚ùì FAQ </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ibm/mcp-context-forge/edit/main/docs/docs/manage/sso-entra-role-mapping.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.06 9 .94.94L5.92 19H5v-.92zm3.6-6c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"></path></svg> </a> <h1 id=microsoft-entraid-role-and-group-claim-mapping>Microsoft EntraID Role and Group Claim Mapping<a class=headerlink href=#microsoft-entraid-role-and-group-claim-mapping title="Permanent link">¬∂</a></h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">¬∂</a></h2> <p>This feature enables automatic role assignment for Microsoft EntraID (formerly Azure AD) SSO users based on their group memberships or app role assignments. Users are automatically assigned Context Forge RBAC roles based on their EntraID groups, providing granular access control without manual intervention.</p> <h2 id=features>Features<a class=headerlink href=#features title="Permanent link">¬∂</a></h2> <ul> <li>‚úÖ Extract groups and roles from EntraID tokens</li> <li>‚úÖ Map EntraID groups to Context Forge RBAC roles</li> <li>‚úÖ Support for both Security Groups (Object IDs) and App Roles</li> <li>‚úÖ Automatic role synchronization on login</li> <li>‚úÖ Platform admin assignment via admin groups</li> <li>‚úÖ Default role assignment for users without group mappings</li> <li>‚úÖ Consistent with Keycloak implementation pattern</li> </ul> <h2 id=architecture>Architecture<a class=headerlink href=#architecture title="Permanent link">¬∂</a></h2> <h3 id=role-system>Role System<a class=headerlink href=#role-system title="Permanent link">¬∂</a></h3> <p>Context Forge includes a comprehensive RBAC system with the following default roles:</p> <ol> <li><strong><code>platform_admin</code></strong> (global scope)</li> <li>Permissions: <code>["*"]</code> (all permissions)</li> <li> <p>Full platform access</p> </li> <li> <p><strong><code>team_admin</code></strong> (team scope)</p> </li> <li>Permissions: Team management, tools, resources, prompts</li> <li> <p>Can manage team members and settings</p> </li> <li> <p><strong><code>developer</code></strong> (team scope)</p> </li> <li>Permissions: Tool execution, resource access, prompts</li> <li> <p>Can execute tools and access resources</p> </li> <li> <p><strong><code>viewer</code></strong> (team scope)</p> </li> <li>Permissions: Read-only access to tools, resources, prompts</li> <li>Cannot execute tools or modify resources</li> </ol> <h3 id=implementation-components>Implementation Components<a class=headerlink href=#implementation-components title="Permanent link">¬∂</a></h3> <ol> <li><strong>Configuration</strong> (<code>mcpgateway/config.py</code>)</li> <li><code>sso_entra_groups_claim</code>: JWT claim for groups (default: "groups")</li> <li><code>sso_entra_admin_groups</code>: Groups granting platform_admin role</li> <li><code>sso_entra_role_mappings</code>: Map groups to roles</li> <li><code>sso_entra_default_role</code>: Default role for unmapped users</li> <li> <p><code>sso_entra_sync_roles_on_login</code>: Sync roles on each login</p> </li> <li> <p><strong>Token Parsing</strong> (<code>_get_user_info()</code> and <code>_decode_jwt_claims()</code>)</p> </li> <li>Parses the <code>id_token</code> JWT to extract claims (Microsoft's userinfo endpoint doesn't return groups)</li> <li>Extracts <code>groups</code> claim (Security Groups as Object IDs)</li> <li>Extracts <code>roles</code> claim (App Roles)</li> <li> <p>Falls back to userinfo for basic profile claims (email, name, etc.)</p> </li> <li> <p><strong>Group Normalization</strong> (<code>_normalize_user_info()</code>)</p> </li> <li>Combines groups and roles from id_token</li> <li>Deduplicates and returns normalized user info</li> <li> <p>Supports custom groups claim via provider metadata</p> </li> <li> <p><strong>Role Mapping</strong> (<code>_map_groups_to_roles()</code>)</p> </li> <li>Maps EntraID groups to Context Forge roles</li> <li>Checks admin groups first (case-insensitive)</li> <li>Applies role mappings from configuration</li> <li> <p>Assigns default role if no mappings found</p> </li> <li> <p><strong>Role Synchronization</strong> (<code>_sync_user_roles()</code>)</p> </li> <li>Synchronizes roles on user creation and login</li> <li>Revokes SSO-granted roles no longer in groups</li> <li>Assigns new roles based on current groups</li> <li>Preserves manually assigned roles</li> <li> <p>Maintains audit trail with <code>granted_by='sso_system'</code></p> </li> <li> <p><strong>Admin Status Synchronization</strong> (<code>authenticate_or_create_user()</code>)</p> </li> <li>Upgrades <code>is_admin</code> flag when user gains admin group membership</li> <li><strong>Never downgrades</strong> <code>is_admin</code> - manual admin grants via Admin UI/API are preserved</li> <li>To revoke admin access, use the Admin UI/API directly</li> </ol> <h2 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">¬∂</a></h2> <h3 id=1-entraid-app-registration-setup>1. EntraID App Registration Setup<a class=headerlink href=#1-entraid-app-registration-setup title="Permanent link">¬∂</a></h3> <h4 id=token-configuration-azure-portal>Token Configuration (Azure Portal)<a class=headerlink href=#token-configuration-azure-portal title="Permanent link">¬∂</a></h4> <blockquote> <p><strong>Important</strong>: Groups and roles must be configured in the <strong>ID token</strong>, not just the access token. Microsoft's OIDC userinfo endpoint does not return group claims - Context Forge extracts them from the ID token.</p> </blockquote> <ol> <li>Navigate to <strong>Azure Portal</strong> ‚Üí <strong>App Registrations</strong> ‚Üí Your App</li> <li>Go to <strong>Token Configuration</strong></li> <li>Click <strong>+ Add groups claim</strong></li> <li>Select token types: <strong>ID</strong> (required), Access (optional)</li> <li>Select group types:</li> <li><strong>Security groups</strong> (recommended for most use cases)</li> <li>Or <strong>All groups</strong> if you need Microsoft 365 groups</li> <li>Choose <strong>Group ID</strong> format for stability (Object IDs won't change)</li> <li>For App Roles: Go to <strong>App Roles</strong> and create roles (they are automatically included in tokens)</li> </ol> <h4 id=app-roles-recommended-approach>App Roles (Recommended Approach)<a class=headerlink href=#app-roles-recommended-approach title="Permanent link">¬∂</a></h4> <ol> <li>Navigate to <strong>App Roles</strong> in your App Registration</li> <li>Create roles with semantic names: <div class="language-json highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=p>{</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span><span class=nt>"displayName"</span><span class=p>:</span><span class=w> </span><span class=s2>"Admin"</span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>  </span><span class=nt>"value"</span><span class=p>:</span><span class=w> </span><span class=s2>"Admin"</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>  </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Platform administrators"</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=p>}</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=p>{</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>  </span><span class=nt>"displayName"</span><span class=p>:</span><span class=w> </span><span class=s2>"Developer"</span><span class=p>,</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=w>  </span><span class=nt>"value"</span><span class=p>:</span><span class=w> </span><span class=s2>"Developer"</span><span class=p>,</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=w>  </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Developers with tool access"</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=p>}</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=p>{</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=w>  </span><span class=nt>"displayName"</span><span class=p>:</span><span class=w> </span><span class=s2>"Viewer"</span><span class=p>,</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=w>  </span><span class=nt>"value"</span><span class=p>:</span><span class=w> </span><span class=s2>"Viewer"</span><span class=p>,</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=w>  </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Read-only users"</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=p>}</span>
</span></code></pre></div></li> </ol> <h3 id=2-environment-variables>2. Environment Variables<a class=headerlink href=#2-environment-variables title="Permanent link">¬∂</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1># Basic EntraID SSO</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=nv>SSO_ENTRA_ENABLED</span><span class=o>=</span><span class=nb>true</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=nv>SSO_ENTRA_CLIENT_ID</span><span class=o>=</span>your-client-id
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=nv>SSO_ENTRA_CLIENT_SECRET</span><span class=o>=</span>your-secret
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=nv>SSO_ENTRA_TENANT_ID</span><span class=o>=</span>your-tenant-id
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=c1># Role Mapping Configuration</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=nv>SSO_ENTRA_GROUPS_CLAIM</span><span class=o>=</span>groups<span class=w>  </span><span class=c1># or "roles" for app roles</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=nv>SSO_ENTRA_DEFAULT_ROLE</span><span class=o>=</span>viewer
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=nv>SSO_ENTRA_SYNC_ROLES_ON_LOGIN</span><span class=o>=</span><span class=nb>true</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=c1># Admin Groups (Object IDs or App Role names)</span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=nv>SSO_ENTRA_ADMIN_GROUPS</span><span class=o>=[</span><span class=s2>"a1b2c3d4-1234-5678-90ab-cdef12345678"</span>,<span class=s2>"Admin"</span><span class=o>]</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=c1># Group to Role Mapping (JSON format)</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=nv>SSO_ENTRA_ROLE_MAPPINGS</span><span class=o>={</span><span class=s2>"e5f6g7h8-1234-5678-90ab-cdef12345678"</span>:<span class=s2>"developer"</span>,<span class=s2>"i9j0k1l2-1234-5678-90ab-cdef12345678"</span>:<span class=s2>"team_admin"</span>,<span class=s2>"Developer"</span>:<span class=s2>"developer"</span>,<span class=s2>"TeamAdmin"</span>:<span class=s2>"team_admin"</span>,<span class=s2>"Viewer"</span>:<span class=s2>"viewer"</span><span class=o>}</span>
</span></code></pre></div> <h3 id=3-provider-metadata-database-configuration>3. Provider Metadata (Database Configuration)<a class=headerlink href=#3-provider-metadata-database-configuration title="Permanent link">¬∂</a></h3> <p>You can also configure role mappings in the SSO provider metadata:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=p>{</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span><span class=nt>"groups_claim"</span><span class=p>:</span><span class=w> </span><span class=s2>"roles"</span><span class=p>,</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span><span class=nt>"role_mappings"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=nt>"Admin"</span><span class=p>:</span><span class=w> </span><span class=s2>"platform_admin"</span><span class=p>,</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>    </span><span class=nt>"Developer"</span><span class=p>:</span><span class=w> </span><span class=s2>"developer"</span><span class=p>,</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>    </span><span class=nt>"TeamAdmin"</span><span class=p>:</span><span class=w> </span><span class=s2>"team_admin"</span><span class=p>,</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>    </span><span class=nt>"Viewer"</span><span class=p>:</span><span class=w> </span><span class=s2>"viewer"</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=p>}</span>
</span></code></pre></div> <h2 id=usage-examples>Usage Examples<a class=headerlink href=#usage-examples title="Permanent link">¬∂</a></h2> <h3 id=example-1-using-app-roles-recommended>Example 1: Using App Roles (Recommended)<a class=headerlink href=#example-1-using-app-roles-recommended title="Permanent link">¬∂</a></h3> <p><strong>EntraID Configuration:</strong> - App Roles: <code>Admin</code>, <code>Developer</code>, <code>Viewer</code> - Token includes <code>roles</code> claim</p> <p><strong>Environment Variables:</strong> </p><div class="language-bash highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nv>SSO_ENTRA_GROUPS_CLAIM</span><span class=o>=</span>roles
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=nv>SSO_ENTRA_ADMIN_GROUPS</span><span class=o>=[</span><span class=s2>"Admin"</span><span class=o>]</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=nv>SSO_ENTRA_ROLE_MAPPINGS</span><span class=o>={</span><span class=s2>"Developer"</span>:<span class=s2>"developer"</span>,<span class=s2>"Viewer"</span>:<span class=s2>"viewer"</span><span class=o>}</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=nv>SSO_ENTRA_DEFAULT_ROLE</span><span class=o>=</span>viewer
</span></code></pre></div><p></p> <p><strong>Result:</strong> - User with <code>Admin</code> role ‚Üí <code>platform_admin</code> (global scope) - User with <code>Developer</code> role ‚Üí <code>developer</code> (team scope) - User with <code>Viewer</code> role ‚Üí <code>viewer</code> (team scope) - User with no roles ‚Üí <code>viewer</code> (default)</p> <h3 id=example-2-using-security-groups-object-ids>Example 2: Using Security Groups (Object IDs)<a class=headerlink href=#example-2-using-security-groups-object-ids title="Permanent link">¬∂</a></h3> <p><strong>EntraID Configuration:</strong> - Security Groups with Object IDs - Token includes <code>groups</code> claim</p> <p><strong>Environment Variables:</strong> </p><div class="language-bash highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nv>SSO_ENTRA_GROUPS_CLAIM</span><span class=o>=</span>groups
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=nv>SSO_ENTRA_ADMIN_GROUPS</span><span class=o>=[</span><span class=s2>"a1b2c3d4-1234-5678-90ab-cdef12345678"</span><span class=o>]</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=nv>SSO_ENTRA_ROLE_MAPPINGS</span><span class=o>={</span><span class=s2>"e5f6g7h8-1234-5678-90ab-cdef12345678"</span>:<span class=s2>"developer"</span>,<span class=s2>"i9j0k1l2-1234-5678-90ab-cdef12345678"</span>:<span class=s2>"viewer"</span><span class=o>}</span>
</span></code></pre></div><p></p> <p><strong>Result:</strong> - User in group <code>a1b2c3d4-...</code> ‚Üí <code>platform_admin</code> - User in group <code>e5f6g7h8-...</code> ‚Üí <code>developer</code> - User in group <code>i9j0k1l2-...</code> ‚Üí <code>viewer</code></p> <h3 id=example-3-mixed-approach>Example 3: Mixed Approach<a class=headerlink href=#example-3-mixed-approach title="Permanent link">¬∂</a></h3> <p><strong>EntraID Configuration:</strong> - Both Security Groups and App Roles - Token includes both <code>groups</code> and <code>roles</code> claims</p> <p><strong>Environment Variables:</strong> </p><div class="language-bash highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nv>SSO_ENTRA_GROUPS_CLAIM</span><span class=o>=</span>groups
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=nv>SSO_ENTRA_ADMIN_GROUPS</span><span class=o>=[</span><span class=s2>"Admin"</span>,<span class=s2>"a1b2c3d4-1234-5678-90ab-cdef12345678"</span><span class=o>]</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=nv>SSO_ENTRA_ROLE_MAPPINGS</span><span class=o>={</span><span class=s2>"Developer"</span>:<span class=s2>"developer"</span>,<span class=s2>"e5f6g7h8-1234-5678-90ab-cdef12345678"</span>:<span class=s2>"team_admin"</span><span class=o>}</span>
</span></code></pre></div><p></p> <h2 id=role-synchronization>Role Synchronization<a class=headerlink href=#role-synchronization title="Permanent link">¬∂</a></h2> <h3 id=on-user-creation>On User Creation<a class=headerlink href=#on-user-creation title="Permanent link">¬∂</a></h3> <p>When a new user logs in via EntraID SSO:</p> <ol> <li>User info is extracted including groups</li> <li>Groups are mapped to roles via <code>_map_groups_to_roles()</code></li> <li>Roles are assigned via <code>_sync_user_roles()</code></li> <li>User is created with <code>is_admin</code> flag if in admin groups</li> <li>RBAC roles are assigned with <code>granted_by='sso_system'</code></li> </ol> <h3 id=on-user-login>On User Login<a class=headerlink href=#on-user-login title="Permanent link">¬∂</a></h3> <p>When an existing user logs in:</p> <ol> <li>User info is updated (name, provider, etc.)</li> <li>If <code>sso_entra_sync_roles_on_login=true</code>:</li> <li>Current groups are extracted</li> <li>Groups are mapped to roles</li> <li>Old SSO-granted roles are revoked if no longer in groups</li> <li>New roles are assigned based on current groups</li> </ol> <h3 id=manual-role-management>Manual Role Management<a class=headerlink href=#manual-role-management title="Permanent link">¬∂</a></h3> <ul> <li>Admins can manually assign additional roles via the Admin UI</li> <li>Manually assigned roles (not granted by <code>sso_system</code>) are preserved</li> <li>Only SSO-granted roles are synchronized on login</li> </ul> <h2 id=token-claims>Token Claims<a class=headerlink href=#token-claims title="Permanent link">¬∂</a></h2> <h3 id=groups-claim-formats>Groups Claim Formats<a class=headerlink href=#groups-claim-formats title="Permanent link">¬∂</a></h3> <p>EntraID can return groups in different formats:</p> <ol> <li> <p><strong>Object IDs</strong> (default): </p><div class="language-json highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=p>{</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>  </span><span class=nt>"groups"</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class=s2>"a1b2c3d4-1234-5678-90ab-cdef12345678"</span><span class=p>,</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span><span class=s2>"e5f6g7h8-1234-5678-90ab-cdef12345678"</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>  </span><span class=p>]</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=p>}</span>
</span></code></pre></div><p></p> </li> <li> <p><strong>Group Names</strong> (requires configuration): </p><div class="language-json highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=p>{</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>  </span><span class=nt>"groups"</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>    </span><span class=s2>"Developers"</span><span class=p>,</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>    </span><span class=s2>"Admins"</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>  </span><span class=p>]</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=p>}</span>
</span></code></pre></div><p></p> </li> <li> <p><strong>App Roles</strong>: </p><div class="language-json highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=p>{</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>  </span><span class=nt>"roles"</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>    </span><span class=s2>"Admin"</span><span class=p>,</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>    </span><span class=s2>"Developer"</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>  </span><span class=p>]</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=p>}</span>
</span></code></pre></div><p></p> </li> </ol> <h3 id=token-size-considerations>Token Size Considerations<a class=headerlink href=#token-size-considerations title="Permanent link">¬∂</a></h3> <p>EntraID has a token size limit (~200 groups). When a user belongs to more groups than can fit in the token, EntraID returns a "group overage" indicator (<code>_claim_names</code>/<code>_claim_sources</code>) instead of the actual groups array.</p> <p><strong>Context Forge detects this condition and logs a warning:</strong> </p><div class="language-text highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>Group overage detected for user user@example.com - token contains too many groups (&gt;200).
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>Role mapping may be incomplete. Consider using App Roles or Azure group filtering.
</span></code></pre></div><p></p> <p><strong>Solutions for group overage:</strong></p> <ol> <li><strong>Use App Roles</strong> (Recommended) - App roles are always included in the token and not subject to overage limits</li> <li><strong>Azure group filtering</strong> - In Azure Portal ‚Üí App Registration ‚Üí Token Configuration, filter groups to only include specific security groups</li> <li><strong>Claims transformation</strong> - Use Azure claims mapping policies to reduce group claims</li> <li><strong>Direct group assignment</strong> - Assign groups directly to the application instead of user-level membership</li> </ol> <p><strong>Reference:</strong> <a href=https://learn.microsoft.com/en-us/entra/identity-platform/access-tokens#groups-overage-claim>Microsoft Groups Overage Claim</a></p> <h2 id=security-considerations>Security Considerations<a class=headerlink href=#security-considerations title="Permanent link">¬∂</a></h2> <h3 id=group-id-vs-name-mapping>Group ID vs Name Mapping<a class=headerlink href=#group-id-vs-name-mapping title="Permanent link">¬∂</a></h3> <ul> <li><strong>Object IDs</strong>: Stable but not human-readable</li> <li><strong>Group Names</strong>: Readable but can change</li> <li><strong>App Roles</strong>: Stable, semantic, and recommended</li> </ul> <h3 id=best-practices>Best Practices<a class=headerlink href=#best-practices title="Permanent link">¬∂</a></h3> <ol> <li><strong>Use App Roles</strong> for stable, semantic mappings</li> <li><strong>Limit admin groups</strong> to minimize security risk</li> <li><strong>Enable role sync</strong> to keep permissions current</li> <li><strong>Audit role assignments</strong> via permission audit logs</li> <li><strong>Test mappings</strong> before production deployment</li> </ol> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">¬∂</a></h2> <h3 id=issue-users-not-getting-roles>Issue: Users not getting roles<a class=headerlink href=#issue-users-not-getting-roles title="Permanent link">¬∂</a></h3> <p><strong>Check:</strong> 1. Token includes <code>groups</code> or <code>roles</code> claim 2. <code>SSO_ENTRA_GROUPS_CLAIM</code> matches claim name in token 3. Group IDs/names match <code>SSO_ENTRA_ROLE_MAPPINGS</code> 4. Roles exist in Context Forge (check via Admin UI)</p> <p><strong>Debug:</strong> </p><div class="language-bash highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1># Check user's SSO metadata</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>SELECT<span class=w> </span>sso_metadata<span class=w> </span>FROM<span class=w> </span>pending_user_approval<span class=w> </span>WHERE<span class=w> </span><span class=nv>email</span><span class=o>=</span><span class=s1>'user@example.com'</span><span class=p>;</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=c1># Check user's current roles</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>SELECT<span class=w> </span>r.name,<span class=w> </span>ur.scope,<span class=w> </span>ur.granted_by
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>FROM<span class=w> </span>user_roles<span class=w> </span>ur
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>JOIN<span class=w> </span>roles<span class=w> </span>r<span class=w> </span>ON<span class=w> </span>ur.role_id<span class=w> </span><span class=o>=</span><span class=w> </span>r.id
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>WHERE<span class=w> </span>ur.user_email<span class=o>=</span><span class=s1>'user@example.com'</span><span class=p>;</span>
</span></code></pre></div><p></p> <h3 id=issue-admin-users-not-getting-admin-access>Issue: Admin users not getting admin access<a class=headerlink href=#issue-admin-users-not-getting-admin-access title="Permanent link">¬∂</a></h3> <p><strong>Check:</strong> 1. User's group is in <code>SSO_ENTRA_ADMIN_GROUPS</code> 2. Group ID/name matches exactly (case-insensitive) 3. <code>is_admin</code> flag is set on user record</p> <p><strong>Debug:</strong> </p><div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1># Check user's admin status</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>SELECT<span class=w> </span>email,<span class=w> </span>is_admin,<span class=w> </span>auth_provider<span class=w> </span>FROM<span class=w> </span>email_users<span class=w> </span>WHERE<span class=w> </span><span class=nv>email</span><span class=o>=</span><span class=s1>'user@example.com'</span><span class=p>;</span>
</span></code></pre></div><p></p> <h3 id=issue-roles-not-syncing-on-login>Issue: Roles not syncing on login<a class=headerlink href=#issue-roles-not-syncing-on-login title="Permanent link">¬∂</a></h3> <p><strong>Check:</strong> 1. <code>SSO_ENTRA_SYNC_ROLES_ON_LOGIN=true</code> 2. User has groups in token 3. No errors in application logs</p> <p><strong>Debug:</strong> </p><div class="language-bash highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1># Check application logs for role sync messages</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>grep<span class=w> </span><span class=s2>"Assigned SSO role"</span><span class=w> </span>/var/log/mcpgateway.log
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>grep<span class=w> </span><span class=s2>"Revoked SSO role"</span><span class=w> </span>/var/log/mcpgateway.log
</span></code></pre></div><p></p> <h3 id=issue-group-overage-user-has-too-many-groups>Issue: Group overage - user has too many groups<a class=headerlink href=#issue-group-overage-user-has-too-many-groups title="Permanent link">¬∂</a></h3> <p><strong>Symptoms:</strong> - User doesn't receive expected roles - Application logs show: <code>Group overage detected for user ... token contains too many groups (&gt;200)</code></p> <p><strong>Cause:</strong> User belongs to more than ~200 security groups. EntraID cannot fit all groups in the token and instead includes a "groups overage" indicator.</p> <p><strong>Solutions:</strong> 1. <strong>Use App Roles</strong> (Recommended) - Not subject to token size limits 2. <strong>Configure group filtering</strong> - In Azure Portal, limit which groups are included in the token 3. <strong>Assign groups to the application</strong> - Use application-assigned groups instead of user memberships</p> <p><strong>Debug:</strong> </p><div class="language-bash highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1># Check for overage warnings in logs</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>grep<span class=w> </span><span class=s2>"Group overage detected"</span><span class=w> </span>/var/log/mcpgateway.log
</span></code></pre></div><p></p> <p>See <a href=#token-size-considerations>Token Size Considerations</a> for detailed solutions.</p> <h2 id=migration-guide>Migration Guide<a class=headerlink href=#migration-guide title="Permanent link">¬∂</a></h2> <h3 id=migrating-from-admin-only-to-rbac>Migrating from Admin-Only to RBAC<a class=headerlink href=#migrating-from-admin-only-to-rbac title="Permanent link">¬∂</a></h3> <p>If you previously used only the <code>is_admin</code> flag:</p> <ol> <li> <p><strong>Identify current admin users</strong>: </p><div class="language-sql highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=k>SELECT</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>email_users</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>is_admin</span><span class=o>=</span><span class=k>true</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>auth_provider</span><span class=o>=</span><span class=s1>'entra'</span><span class=p>;</span>
</span></code></pre></div><p></p> </li> <li> <p><strong>Configure admin groups</strong>: </p><div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=nv>SSO_ENTRA_ADMIN_GROUPS</span><span class=o>=[</span><span class=s2>"your-admin-group-id"</span><span class=o>]</span>
</span></code></pre></div><p></p> </li> <li> <p><strong>Configure role mappings</strong> for non-admin users: </p><div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=nv>SSO_ENTRA_ROLE_MAPPINGS</span><span class=o>={</span><span class=s2>"developer-group"</span>:<span class=s2>"developer"</span>,<span class=s2>"viewer-group"</span>:<span class=s2>"viewer"</span><span class=o>}</span>
</span></code></pre></div><p></p> </li> <li> <p><strong>Enable role sync</strong>: </p><div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=nv>SSO_ENTRA_SYNC_ROLES_ON_LOGIN</span><span class=o>=</span><span class=nb>true</span>
</span></code></pre></div><p></p> </li> <li> <p><strong>Test with non-admin users</strong> first</p> </li> <li><strong>Roll out to all users</strong></li> </ol> <h2 id=api-reference>API Reference<a class=headerlink href=#api-reference title="Permanent link">¬∂</a></h2> <h3 id=configuration-fields>Configuration Fields<a class=headerlink href=#configuration-fields title="Permanent link">¬∂</a></h3> <table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Default</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>sso_entra_groups_claim</code></td> <td>str</td> <td>"groups"</td> <td>JWT claim for groups</td> </tr> <tr> <td><code>sso_entra_admin_groups</code></td> <td>list[str]</td> <td>[]</td> <td>Groups granting platform_admin</td> </tr> <tr> <td><code>sso_entra_role_mappings</code></td> <td>dict[str,str]</td> <td>{}</td> <td>Map groups to roles</td> </tr> <tr> <td><code>sso_entra_default_role</code></td> <td>str</td> <td>None</td> <td>Default role for unmapped users (None = no automatic role)</td> </tr> <tr> <td><code>sso_entra_sync_roles_on_login</code></td> <td>bool</td> <td>true</td> <td>Sync roles on each login</td> </tr> </tbody> </table> <h3 id=methods>Methods<a class=headerlink href=#methods title="Permanent link">¬∂</a></h3> <h4 id=_normalize_user_infoprovider-user_data><code>_normalize_user_info(provider, user_data)</code><a class=headerlink href=#_normalize_user_infoprovider-user_data title="Permanent link">¬∂</a></h4> <p>Extracts user info and groups from EntraID token.</p> <p><strong>Returns:</strong> </p><div class="language-python highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=p>{</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>  <span class=s2>"email"</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>  <span class=s2>"full_name"</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>  <span class=s2>"provider"</span><span class=p>:</span> <span class=s2>"entra"</span><span class=p>,</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>  <span class=s2>"groups"</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>  <span class=c1># Group IDs or role names</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=p>}</span>
</span></code></pre></div><p></p> <h4 id=_map_groups_to_rolesuser_email-user_groups-provider><code>_map_groups_to_roles(user_email, user_groups, provider)</code><a class=headerlink href=#_map_groups_to_rolesuser_email-user_groups-provider title="Permanent link">¬∂</a></h4> <p>Maps EntraID groups to Context Forge roles.</p> <p><strong>Returns:</strong> </p><div class="language-python highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=p>[</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>  <span class=p>{</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>    <span class=s2>"role_name"</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>    <span class=s2>"scope"</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>  <span class=c1># "global" or "team"</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>    <span class=s2>"scope_id"</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a>  <span class=p>}</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=p>]</span>
</span></code></pre></div><p></p> <h4 id=_sync_user_rolesuser_email-role_assignments-provider><code>_sync_user_roles(user_email, role_assignments, provider)</code><a class=headerlink href=#_sync_user_rolesuser_email-role_assignments-provider title="Permanent link">¬∂</a></h4> <p>Synchronizes user's role assignments.</p> <p><strong>Side Effects:</strong> - Revokes old SSO-granted roles - Assigns new roles from current groups - Commits changes to database</p> <h2 id=comparison-with-other-providers>Comparison with Other Providers<a class=headerlink href=#comparison-with-other-providers title="Permanent link">¬∂</a></h2> <table> <thead> <tr> <th>Feature</th> <th>Keycloak</th> <th>EntraID</th> <th>GitHub</th> <th>Google</th> </tr> </thead> <tbody> <tr> <td>Group extraction</td> <td>‚úÖ</td> <td>‚úÖ</td> <td>‚ùå</td> <td>‚ùå</td> </tr> <tr> <td>Role mapping</td> <td>‚úÖ</td> <td>‚úÖ</td> <td>‚ùå</td> <td>‚ùå</td> </tr> <tr> <td>Admin groups</td> <td>‚úÖ</td> <td>‚úÖ</td> <td>‚úÖ</td> <td>‚úÖ</td> </tr> <tr> <td>Role sync on login</td> <td>‚úÖ</td> <td>‚úÖ</td> <td>‚ùå</td> <td>‚ùå</td> </tr> <tr> <td>Custom claim name</td> <td>‚úÖ</td> <td>‚úÖ</td> <td>N/A</td> <td>N/A</td> </tr> </tbody> </table> <h2 id=future-enhancements>Future Enhancements<a class=headerlink href=#future-enhancements title="Permanent link">¬∂</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Team-scoped role assignments based on groups</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Role mapping UI in Admin panel</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Group-to-team mapping</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Conditional role assignment based on additional claims</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Role assignment expiration based on group membership duration</li> </ul> <h2 id=design-decisions>Design Decisions<a class=headerlink href=#design-decisions title="Permanent link">¬∂</a></h2> <p>This section documents key architectural decisions. See <a href=../../architecture/adr/034-sso-admin-sync-config-precedence/ >ADR-034</a> for full details.</p> <h3 id=admin-status-synchronization>Admin Status Synchronization<a class=headerlink href=#admin-status-synchronization title="Permanent link">¬∂</a></h3> <p><strong>Behavior</strong>: SSO can only <strong>upgrade</strong> <code>is_admin</code> to True, never downgrade.</p> <table> <thead> <tr> <th>Scenario</th> <th>Behavior</th> </tr> </thead> <tbody> <tr> <td>User gains admin group</td> <td><code>is_admin</code> upgraded to True</td> </tr> <tr> <td>User loses admin group</td> <td><code>is_admin</code> <strong>preserved</strong> (not revoked)</td> </tr> <tr> <td>Manual admin grant</td> <td>Preserved across all SSO logins</td> </tr> </tbody> </table> <p><strong>Rationale</strong>: - Manual admin grants via Admin UI/API are intentional decisions - RBAC roles (<code>platform_admin</code>) already handle group-based role sync with revocation - To revoke admin access, use the Admin UI/API explicitly</p> <p><strong>Note</strong>: The <code>is_admin</code> flag provides a platform-level bypass. RBAC roles provide granular, auditable access control with proper <code>granted_by</code> tracking.</p> <h3 id=configuration-precedence-bootstrap>Configuration Precedence (Bootstrap)<a class=headerlink href=#configuration-precedence-bootstrap title="Permanent link">¬∂</a></h3> <p><strong>Behavior</strong>: Smart merge - environment provides defaults, database values preserved.</p> <table> <thead> <tr> <th>Key Source</th> <th>Behavior</th> </tr> </thead> <tbody> <tr> <td>Only in env config</td> <td>Applied (new features)</td> </tr> <tr> <td>Only in database</td> <td>Preserved (Admin API changes)</td> </tr> <tr> <td>In both</td> <td><strong>Database wins</strong></td> </tr> </tbody> </table> <p><strong>Example</strong>: </p><div class="language-text highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>Env:    {"groups_claim": "groups", "new_feature": true}
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>DB:     {"groups_claim": "custom", "sync_roles": false}
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>Result: {"groups_claim": "custom", "new_feature": true, "sync_roles": false}
</span></code></pre></div><p></p> <p><strong>To change a key that exists in database</strong>: 1. Use Admin API to update the provider 2. Or delete the provider and restart (bootstrap recreates from env)</p> <h3 id=id-token-trust-model>ID Token Trust Model<a class=headerlink href=#id-token-trust-model title="Permanent link">¬∂</a></h3> <p>Groups and roles are extracted from the <code>id_token</code> JWT received from the token endpoint. The token is trusted without signature validation because:</p> <ul> <li>Received directly from IdP over HTTPS after valid code exchange</li> <li>OAuth flow (state, PKCE) already validated</li> <li>Consistent with standard OAuth client library behavior</li> </ul> <p><strong>Important</strong>: Configure group claims in the <strong>ID token</strong> in Azure Portal. The OIDC userinfo endpoint does not return groups.</p> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">¬∂</a></h2> <ul> <li><a href=https://learn.microsoft.com/en-us/entra/identity-platform/userinfo>Microsoft identity platform UserInfo endpoint</a> - Why groups aren't in userinfo</li> <li><a href=https://learn.microsoft.com/en-us/entra/identity-platform/optional-claims>Configure optional claims</a> - Group limits and token configuration</li> <li><a href=https://learn.microsoft.com/en-us/entra/identity-platform/id-token-claims-reference>ID token claims reference</a> - Groups overage claim details</li> <li><a href=https://learn.microsoft.com/en-us/entra/identity/hybrid/connect/how-to-connect-fed-group-claims>Configure group claims for applications</a> - Advanced group claim configuration</li> </ul> <h2 id=support>Support<a class=headerlink href=#support title="Permanent link">¬∂</a></h2> <p>For issues or questions: 1. Check application logs for error messages 2. Verify EntraID token configuration in Azure Portal 3. Test with a single user before rolling out 4. Consult the troubleshooting section above 5. Open an issue on GitHub with logs and configuration (redact secrets)</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="January 19, 2026 01:16:08 UTC">January 19, 2026</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Contributors> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"></path></svg> </span> <nav> <a href=mailto:jspringer@us.ibm.com>Jonathan Springer</a> </nav> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Apache 2.0 </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/IBM/mcp-context-forge target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.feedback", "content.code.annotate", "content.code.copy", "navigation.indexes", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.share", "search.suggest", "toc.integrate"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.e71a0d61.min.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>