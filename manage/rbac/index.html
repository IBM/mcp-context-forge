<!DOCTYPE html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="MCP Gateway Documentation"><meta name=author content="Mihai Criveti"><link href=https://pages.github.com/ibm/mcp-context-forge/manage/rbac/ rel=canonical><link href=../sso-generic-oidc-tutorial/ rel=prev><link href=../teams/ rel=next><link rel=alternate type=application/rss+xml title="RSS feed" href=../../feed_rss_created.xml><link rel=alternate type=application/rss+xml title="RSS feed of updated content" href=../../feed_rss_updated.xml><link rel=icon href=../../favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>RBAC Configuration - MCP Context Forge - Model Context Protocol Gateway</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><script src=../../assets/javascripts/glightbox.min.js></script><style id=glightbox-style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#rbac-configuration class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="MCP Context Forge - Model Context Protocol Gateway" class="md-header__button md-logo" aria-label="MCP Context Forge - Model Context Protocol Gateway" data-md-component=logo> <img src=../../logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> MCP Context Forge - Model Context Protocol Gateway </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> RBAC Configuration </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ibm/mcp-context-forge title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class=md-source__repository> ibm/mcp-context-forge </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> üè† Home </a> </li> <li class=md-tabs__item> <a href=../../overview/ class=md-tabs__link> üß≠ Overview </a> </li> <li class=md-tabs__item> <a href=../../using/ class=md-tabs__link> üß∞ Use </a> </li> <li class=md-tabs__item> <a href=../../deployment/ class=md-tabs__link> üöÄ Deploy </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> üõ°Ô∏è Manage </a> </li> <li class=md-tabs__item> <a href=../../operations/config-validation/ class=md-tabs__link> Operations </a> </li> <li class=md-tabs__item> <a href=../../development/ class=md-tabs__link> üíª Develop </a> </li> <li class=md-tabs__item> <a href=../../testing/ class=md-tabs__link> üß™ Test </a> </li> <li class=md-tabs__item> <a href=../../architecture/ class=md-tabs__link> üìê Design &amp; Roadmap </a> </li> <li class=md-tabs__item> <a href=../../media/ class=md-tabs__link> üì∞ Media </a> </li> <li class=md-tabs__item> <a href=../../tutorials/ class=md-tabs__link> üìñ Tutorials </a> </li> <li class=md-tabs__item> <a href=../../best-practices/selecting-an-mcp-gateway/ class=md-tabs__link> ‚≠ê Best Practices </a> </li> <li class=md-tabs__item> <a href=../../faq/ class=md-tabs__link> ‚ùì FAQ </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="MCP Context Forge - Model Context Protocol Gateway" class="md-nav__button md-logo" aria-label="MCP Context Forge - Model Context Protocol Gateway" data-md-component=logo> <img src=../../logo.png alt=logo> </a> MCP Context Forge - Model Context Protocol Gateway </label> <div class=md-nav__source> <a href=https://github.com/ibm/mcp-context-forge title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class=md-source__repository> ibm/mcp-context-forge </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> üè† Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../overview/ class="md-nav__link "> <span class=md-ellipsis> üß≠ Overview </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> üß≠ Overview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/quick_start/ class=md-nav__link> <span class=md-ellipsis> üöÄ Quick Start </span> <span class="md-status md-status--published"></span> </a> </li> <li class=md-nav__item> <a href=../../overview/features/ class=md-nav__link> <span class=md-ellipsis> ‚ú® Features Overview </span> </a> </li> <li class=md-nav__item> <a href=../../overview/ui/ class=md-nav__link> <span class=md-ellipsis> Admin UI </span> </a> </li> <li class=md-nav__item> <a href=../../overview/ui-concepts/ class=md-nav__link> <span class=md-ellipsis> Admin Console Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../overview/passthrough/ class=md-nav__link> <span class=md-ellipsis> HTTP Header Passthrough </span> </a> </li> <li class=md-nav__item> <a href=../../overview/tags/ class=md-nav__link> <span class=md-ellipsis> üè∑Ô∏è Tags System </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../using/ class="md-nav__link "> <span class=md-ellipsis> üß∞ Use </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> üß∞ Use </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/mcpgateway-wrapper/ class=md-nav__link> <span class=md-ellipsis> üõ† STDIO Wrapper (mcpgateway.wrapper) </span> </a> </li> <li class=md-nav__item> <a href=../../using/mcpgateway-translate/ class=md-nav__link> <span class=md-ellipsis> MCP Gateway Transport Bridge (mcpgateway.translate) </span> </a> </li> <li class=md-nav__item> <a href=../../using/reverse-proxy/ class=md-nav__link> <span class=md-ellipsis> MCP Reverse Proxy </span> </a> </li> <li class=md-nav__item> <a href=../../using/multi-auth-headers/ class=md-nav__link> <span class=md-ellipsis> Multiple Authentication Headers </span> </a> </li> <li class=md-nav__item> <a href=../../using/query-param-auth/ class=md-nav__link> <span class=md-ellipsis> Query Parameter Authentication </span> </a> </li> <li class=md-nav__item> <a href=../../using/tool-annotations/ class=md-nav__link> <span class=md-ellipsis> Tool Annotations </span> </a> </li> <li class=md-nav__item> <a href=../../using/rest-passthrough/ class=md-nav__link> <span class=md-ellipsis> REST Passthrough Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../using/grpc-services/ class=md-nav__link> <span class=md-ellipsis> gRPC Services (Experimental) </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_10> <div class="md-nav__link md-nav__container"> <a href=../../using/clients/ class="md-nav__link "> <span class=md-ellipsis> Clients </span> </a> <label class="md-nav__link " for=__nav_3_10 id=__nav_3_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_10_label aria-expanded=false> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> Clients </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/clients/mcp-inspector/ class=md-nav__link> <span class=md-ellipsis> MCP Inspector </span> </a> </li> <li class=md-nav__item> <a href=../../using/clients/claude-desktop/ class=md-nav__link> <span class=md-ellipsis> Claude Desktop √ó MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/clients/copilot/ class=md-nav__link> <span class=md-ellipsis> üß† GitHub Copilot + MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/clients/cline/ class=md-nav__link> <span class=md-ellipsis> Cline (VS Code Extension) </span> </a> </li> <li class=md-nav__item> <a href=../../using/clients/continue/ class=md-nav__link> <span class=md-ellipsis> Continue (VS Code Extension) </span> </a> </li> <li class=md-nav__item> <a href=../../using/clients/openwebui/ class=md-nav__link> <span class=md-ellipsis> OpenWebUI Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/clients/mcp-cli/ class=md-nav__link> <span class=md-ellipsis> üñ•Ô∏è MCP CLI + MCP Context Forge Gateway </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_11> <div class="md-nav__link md-nav__container"> <a href=../../using/agents/ class="md-nav__link "> <span class=md-ellipsis> Agents </span> </a> <label class="md-nav__link " for=__nav_3_11 id=__nav_3_11_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_11_label aria-expanded=false> <label class=md-nav__title for=__nav_3_11> <span class="md-nav__icon md-icon"></span> Agents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/agents/a2a/ class=md-nav__link> <span class=md-ellipsis> A2A (Agent-to-Agent) Integration </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/langchain/ class=md-nav__link> <span class=md-ellipsis> LangChain Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/langgraph/ class=md-nav__link> <span class=md-ellipsis> LangGraph Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/crewai/ class=md-nav__link> <span class=md-ellipsis> CrewAI Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/bee/ class=md-nav__link> <span class=md-ellipsis> Bee Agent Framework Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/autogen/ class=md-nav__link> <span class=md-ellipsis> AutoGen Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/semantic-kernel/ class=md-nav__link> <span class=md-ellipsis> Semantic Kernel Integration with MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/openai-sdk/ class=md-nav__link> <span class=md-ellipsis> OpenAI Agents SDK + MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../using/agents/llamaindex/ class=md-nav__link> <span class=md-ellipsis> LlamaIndex Integration with MCP Gateway </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12> <div class="md-nav__link md-nav__container"> <a href=../../using/servers/ class="md-nav__link "> <span class=md-ellipsis> MCP Servers </span> </a> <label class="md-nav__link " for=__nav_3_12 id=__nav_3_12_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_12_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12> <span class="md-nav__icon md-icon"></span> MCP Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_2> <label class=md-nav__link for=__nav_3_12_2 id=__nav_3_12_2_label tabindex=0> <span class=md-ellipsis> Go Servers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_12_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_2> <span class="md-nav__icon md-icon"></span> Go Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/go/calculator-server/ class=md-nav__link> <span class=md-ellipsis> Go Calculator Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/go/fast-time-server/ class=md-nav__link> <span class=md-ellipsis> Go Fast Time Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/go/slow-time-server/ class=md-nav__link> <span class=md-ellipsis> Go Slow Time Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/go/pandoc-server/ class=md-nav__link> <span class=md-ellipsis> Pandoc Server </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_3> <label class=md-nav__link for=__nav_3_12_3 id=__nav_3_12_3_label tabindex=0> <span class=md-ellipsis> Python Servers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_12_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_3> <span class="md-nav__icon md-icon"></span> Python Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/python/chunker-server/ class=md-nav__link> <span class=md-ellipsis> Chunker Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/code-splitter-server/ class=md-nav__link> <span class=md-ellipsis> Code Splitter Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/csv-pandas-chat-server/ class=md-nav__link> <span class=md-ellipsis> CSV Pandas Chat Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/data-analysis-server/ class=md-nav__link> <span class=md-ellipsis> Python Data Analysis Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/docx-server/ class=md-nav__link> <span class=md-ellipsis> DOCX Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/eval-server/ class=md-nav__link> <span class=md-ellipsis> Python MCP Evaluation Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/graphviz-server/ class=md-nav__link> <span class=md-ellipsis> Graphviz Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/latex-server/ class=md-nav__link> <span class=md-ellipsis> LaTeX Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/libreoffice-server/ class=md-nav__link> <span class=md-ellipsis> LibreOffice Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/mermaid-server/ class=md-nav__link> <span class=md-ellipsis> Mermaid Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/plotly-server/ class=md-nav__link> <span class=md-ellipsis> Plotly Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/pptx-server/ class=md-nav__link> <span class=md-ellipsis> Python PowerPoint (PPTX) Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/python-sandbox-server/ class=md-nav__link> <span class=md-ellipsis> Python Sandbox Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/url-to-markdown-server/ class=md-nav__link> <span class=md-ellipsis> URL to Markdown Server </span> </a> </li> <li class=md-nav__item> <a href=../../using/servers/python/xlsx-server/ class=md-nav__link> <span class=md-ellipsis> XLSX Server </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_4> <label class=md-nav__link for=__nav_3_12_4 id=__nav_3_12_4_label tabindex=0> <span class=md-ellipsis> External Servers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_12_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_4> <span class="md-nav__icon md-icon"></span> External Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_4_1> <label class=md-nav__link for=__nav_3_12_4_1 id=__nav_3_12_4_1_label tabindex=0> <span class=md-ellipsis> GitHub Copilot </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_12_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_4_1> <span class="md-nav__icon md-icon"></span> GitHub Copilot </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/external/microsoft/github/ class=md-nav__link> <span class=md-ellipsis> GitHub MCP Server </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_4_2> <label class=md-nav__link for=__nav_3_12_4_2 id=__nav_3_12_4_2_label tabindex=0> <span class=md-ellipsis> Box </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_12_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_4_2> <span class="md-nav__icon md-icon"></span> Box </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/external/box/box/ class=md-nav__link> <span class=md-ellipsis> Box MCP Server </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_4_3> <label class=md-nav__link for=__nav_3_12_4_3 id=__nav_3_12_4_3_label tabindex=0> <span class=md-ellipsis> monday.com </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_12_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_4_3> <span class="md-nav__icon md-icon"></span> monday.com </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/external/monday/monday-mcp/ class=md-nav__link> <span class=md-ellipsis> monday.com MCP Server </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_4_4> <div class="md-nav__link md-nav__container"> <a href=../../using/servers/external/open/ class="md-nav__link "> <span class=md-ellipsis> Open Servers </span> </a> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_12_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_4_4> <span class="md-nav__icon md-icon"></span> Open Servers </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_5> <label class=md-nav__link for=__nav_3_12_5 id=__nav_3_12_5_label tabindex=0> <span class=md-ellipsis> IBM Servers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_12_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_5> <span class="md-nav__icon md-icon"></span> IBM Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/ibm/instana/ class=md-nav__link> <span class=md-ellipsis> IBM Instana MCP Server </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_12_6> <label class=md-nav__link for=__nav_3_12_6 id=__nav_3_12_6_label tabindex=0> <span class=md-ellipsis> Hashicorp Servers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_12_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12_6> <span class="md-nav__icon md-icon"></span> Hashicorp Servers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/servers/hashicorp/terraform/ class=md-nav__link> <span class=md-ellipsis> Terraform MCP Server </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_13> <div class="md-nav__link md-nav__container"> <a href=../../using/plugins/ class="md-nav__link "> <span class=md-ellipsis> Plugins </span> </a> <label class="md-nav__link " for=__nav_3_13 id=__nav_3_13_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_13_label aria-expanded=false> <label class=md-nav__title for=__nav_3_13> <span class="md-nav__icon md-icon"></span> Plugins </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/plugins/lifecycle/ class=md-nav__link> <span class=md-ellipsis> Plugin Lifecycle </span> </a> </li> <li class=md-nav__item> <a href=../../using/plugins/plugins/ class=md-nav__link> <span class=md-ellipsis> Available Plugins </span> </a> </li> <li class=md-nav__item> <a href=../../using/plugins/http-auth-hooks/ class=md-nav__link> <span class=md-ellipsis> HTTP Authentication Hooks </span> </a> </li> <li class=md-nav__item> <a href=../../using/plugins/grpc-transport/ class=md-nav__link> <span class=md-ellipsis> gRPC Transport for External Plugins </span> </a> </li> <li class=md-nav__item> <a href=../../using/plugins/unix-socket-transport/ class=md-nav__link> <span class=md-ellipsis> Unix Socket Transport </span> </a> </li> <li class=md-nav__item> <a href=../../using/plugins/mtls/ class=md-nav__link> <span class=md-ellipsis> External Plugin mTLS Setup Guide </span> </a> </li> <li class=md-nav__item> <a href=../../using/plugins/rust-plugins/ class=md-nav__link> <span class=md-ellipsis> Rust Plugins - High-Performance Native Extensions </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../deployment/ class="md-nav__link "> <span class=md-ellipsis> üöÄ Deploy </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> üöÄ Deploy </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../deployment/local/ class=md-nav__link> <span class=md-ellipsis> üêç Local Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/container/ class=md-nav__link> <span class=md-ellipsis> üì¶ Container Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/compose/ class=md-nav__link> <span class=md-ellipsis> üß© Docker Compose </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/tls-configuration/ class=md-nav__link> <span class=md-ellipsis> TLS/SSL Configuration Guide </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/kubernetes/ class=md-nav__link> <span class=md-ellipsis> ‚ò∏Ô∏è Kubernetes / OpenShift Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/openshift/ class=md-nav__link> <span class=md-ellipsis> ‚ú® Red Hat OpenShift </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/minikube/ class=md-nav__link> <span class=md-ellipsis> ‚ö°Ô∏è Minikube </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/helm/ class=md-nav__link> <span class=md-ellipsis> üöÄ Deploying the MCP Gateway Stack with Helm </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/argocd/ class=md-nav__link> <span class=md-ellipsis> üö¢ Deploying the MCP Gateway Stack with Argo CD </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/google-cloud-run/ class=md-nav__link> <span class=md-ellipsis> ‚òÅÔ∏è Deploying MCP Gateway on Google Cloud Run </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/ibm-code-engine/ class=md-nav__link> <span class=md-ellipsis> ‚öôÔ∏è IBM Code Engine </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/aws/ class=md-nav__link> <span class=md-ellipsis> üüß AWS </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/azure/ class=md-nav__link> <span class=md-ellipsis> üî∑ Azure </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/fly-io/ class=md-nav__link> <span class=md-ellipsis> ‚öôÔ∏è Fly.io Deployment Guide for MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/proxy-auth/ class=md-nav__link> <span class=md-ellipsis> Proxy Authentication </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/cforge-gateway/ class=md-nav__link> <span class=md-ellipsis> cforge gateway - Deployment Tool </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> üõ°Ô∏è Manage </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> üõ°Ô∏è Manage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration Reference </span> </a> </li> <li class=md-nav__item> <a href=../password-management/ class=md-nav__link> <span class=md-ellipsis> Password Management &amp; Recovery </span> </a> </li> <li class=md-nav__item> <a href=../troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../api-usage/ class=md-nav__link> <span class=md-ellipsis> API Usage Guide </span> </a> </li> <li class=md-nav__item> <a href=../scale/ class=md-nav__link> <span class=md-ellipsis> Scaling MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../parallel-session-cleanup/ class=md-nav__link> <span class=md-ellipsis> Parallel Session Cleanup with asyncio.gather() </span> </a> </li> <li class=md-nav__item> <a href=../tuning/ class=md-nav__link> <span class=md-ellipsis> Gateway Tuning Guide </span> </a> </li> <li class=md-nav__item> <a href=../backup/ class=md-nav__link> <span class=md-ellipsis> Backups </span> </a> </li> <li class=md-nav__item> <a href=../catalog/ class=md-nav__link> <span class=md-ellipsis> MCP Server Catalog </span> </a> </li> <li class=md-nav__item> <a href=../bulk-import/ class=md-nav__link> <span class=md-ellipsis> Bulk Import Tools </span> </a> </li> <li class=md-nav__item> <a href=../metadata-tracking/ class=md-nav__link> <span class=md-ellipsis> üìä Metadata Tracking &amp; Audit Trails </span> </a> </li> <li class=md-nav__item> <a href=../export-import/ class=md-nav__link> <span class=md-ellipsis> Configuration Export &amp; Import </span> </a> </li> <li class=md-nav__item> <a href=../export-import-tutorial/ class=md-nav__link> <span class=md-ellipsis> Export/Import Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../export-import-reference/ class=md-nav__link> <span class=md-ellipsis> Export/Import Quick Reference </span> </a> </li> <li class=md-nav__item> <a href=../logging/ class=md-nav__link> <span class=md-ellipsis> Logging </span> </a> </li> <li class=md-nav__item> <a href=../logging-examples/ class=md-nav__link> <span class=md-ellipsis> Logging Examples for MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../observability/ class=md-nav__link> <span class=md-ellipsis> Observability </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_19> <label class=md-nav__link for=__nav_5_19 id=__nav_5_19_label tabindex=0> <span class=md-ellipsis> Observability </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_19_label aria-expanded=false> <label class=md-nav__title for=__nav_5_19> <span class="md-nav__icon md-icon"></span> Observability </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../observability/observability/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../observability/internal-observability/ class=md-nav__link> <span class=md-ellipsis> Internal Observability </span> </a> </li> <li class=md-nav__item> <a href=../observability/phoenix/ class=md-nav__link> <span class=md-ellipsis> Phoenix Integration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../proxy/ class=md-nav__link> <span class=md-ellipsis> Proxy Authentication </span> </a> </li> <li class=md-nav__item> <a href=../dcr/ class=md-nav__link> <span class=md-ellipsis> Dynamic Client Registration (DCR) </span> </a> </li> <li class=md-nav__item> <a href=../oauth/ class=md-nav__link> <span class=md-ellipsis> OAuth 2.0 Integration </span> </a> </li> <li class=md-nav__item> <a href=../oauth-troubleshooting/ class=md-nav__link> <span class=md-ellipsis> OAuth Troubleshooting Guide </span> </a> </li> <li class=md-nav__item> <a href=../securing/ class=md-nav__link> <span class=md-ellipsis> Securing MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../sso/ class=md-nav__link> <span class=md-ellipsis> Single Sign-On (SSO) Authentication </span> </a> </li> <li class=md-nav__item> <a href=../sso-github-tutorial/ class=md-nav__link> <span class=md-ellipsis> GitHub SSO Setup Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../sso-google-tutorial/ class=md-nav__link> <span class=md-ellipsis> Google OAuth/OIDC Setup Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../sso-ibm-tutorial/ class=md-nav__link> <span class=md-ellipsis> IBM Security Verify Setup Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../sso-microsoft-entra-id-tutorial/ class=md-nav__link> <span class=md-ellipsis> Microsoft Entra ID OIDC Setup Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../sso-entra-role-mapping/ class=md-nav__link> <span class=md-ellipsis> Microsoft EntraID Role and Group Claim Mapping </span> </a> </li> <li class=md-nav__item> <a href=../sso-keycloak-tutorial/ class=md-nav__link> <span class=md-ellipsis> Keycloak OIDC Setup Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../sso-okta-tutorial/ class=md-nav__link> <span class=md-ellipsis> Okta OIDC Setup Tutorial </span> </a> </li> <li class=md-nav__item> <a href=../sso-generic-oidc-tutorial/ class=md-nav__link> <span class=md-ellipsis> Generic OIDC Provider Setup Tutorial </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> RBAC Configuration </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> RBAC Configuration </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> <nav class=md-nav aria-label=Overview> <ul class=md-nav__list> <li class=md-nav__item> <a href=#authentication-methods class=md-nav__link> <span class=md-ellipsis> Authentication Methods </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#core-concepts class=md-nav__link> <span class=md-ellipsis> Core Concepts </span> </a> <nav class=md-nav aria-label="Core Concepts"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#subjects class=md-nav__link> <span class=md-ellipsis> Subjects </span> </a> </li> <li class=md-nav__item> <a href=#teams class=md-nav__link> <span class=md-ellipsis> Teams </span> </a> </li> <li class=md-nav__item> <a href=#built-in-rbac-roles class=md-nav__link> <span class=md-ellipsis> Built-in RBAC Roles </span> </a> </li> <li class=md-nav__item> <a href=#resources class=md-nav__link> <span class=md-ellipsis> Resources </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#token-scoping-model class=md-nav__link> <span class=md-ellipsis> Token Scoping Model </span> </a> <nav class=md-nav aria-label="Token Scoping Model"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#token-scoping-contract class=md-nav__link> <span class=md-ellipsis> Token Scoping Contract </span> </a> </li> <li class=md-nav__item> <a href=#return-value-semantics class=md-nav__link> <span class=md-ellipsis> Return Value Semantics </span> </a> </li> <li class=md-nav__item> <a href=#security-design-principles class=md-nav__link> <span class=md-ellipsis> Security Design Principles </span> </a> </li> <li class=md-nav__item> <a href=#token-scoping-flow class=md-nav__link> <span class=md-ellipsis> Token Scoping Flow </span> </a> </li> <li class=md-nav__item> <a href=#visibility-levels class=md-nav__link> <span class=md-ellipsis> Visibility Levels </span> </a> </li> <li class=md-nav__item> <a href=#access-matrix-by-token-type class=md-nav__link> <span class=md-ellipsis> Access Matrix by Token Type </span> </a> </li> <li class=md-nav__item> <a href=#enforcement-points class=md-nav__link> <span class=md-ellipsis> Enforcement Points </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#token-types-and-use-cases class=md-nav__link> <span class=md-ellipsis> Token Types and Use Cases </span> </a> <nav class=md-nav aria-label="Token Types and Use Cases"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#session-tokens-ui-login class=md-nav__link> <span class=md-ellipsis> Session Tokens (UI Login) </span> </a> </li> <li class=md-nav__item> <a href=#api-tokens-programmatic-access class=md-nav__link> <span class=md-ellipsis> API Tokens (Programmatic Access) </span> </a> </li> <li class=md-nav__item> <a href=#scoped-automation-tokens class=md-nav__link> <span class=md-ellipsis> Scoped Automation Tokens </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#generating-scoped-tokens class=md-nav__link> <span class=md-ellipsis> Generating Scoped Tokens </span> </a> <nav class=md-nav aria-label="Generating Scoped Tokens"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-the-cli-tool class=md-nav__link> <span class=md-ellipsis> Using the CLI Tool </span> </a> </li> <li class=md-nav__item> <a href=#using-the-admin-ui class=md-nav__link> <span class=md-ellipsis> Using the Admin UI </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#permission-system class=md-nav__link> <span class=md-ellipsis> Permission System </span> </a> <nav class=md-nav aria-label="Permission System"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#permission-categories class=md-nav__link> <span class=md-ellipsis> Permission Categories </span> </a> </li> <li class=md-nav__item> <a href=#permission-checking-flow class=md-nav__link> <span class=md-ellipsis> Permission Checking Flow </span> </a> </li> <li class=md-nav__item> <a href=#fallback-permissions class=md-nav__link> <span class=md-ellipsis> Fallback Permissions </span> </a> </li> <li class=md-nav__item> <a href=#admin-api-rbac class=md-nav__link> <span class=md-ellipsis> Admin API RBAC </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration-safety class=md-nav__link> <span class=md-ellipsis> Configuration Safety </span> </a> <nav class=md-nav aria-label="Configuration Safety"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#development-vs-production-settings class=md-nav__link> <span class=md-ellipsis> Development vs Production Settings </span> </a> </li> <li class=md-nav__item> <a href=#proxy-authentication-mode class=md-nav__link> <span class=md-ellipsis> Proxy Authentication Mode </span> </a> </li> <li class=md-nav__item> <a href=#anonymous-mode-auth_requiredfalse class=md-nav__link> <span class=md-ellipsis> Anonymous Mode (AUTH_REQUIRED=false) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> <nav class=md-nav aria-label="Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#token-lifecycle class=md-nav__link> <span class=md-ellipsis> Token Lifecycle </span> </a> </li> <li class=md-nav__item> <a href=#team-organization class=md-nav__link> <span class=md-ellipsis> Team Organization </span> </a> </li> <li class=md-nav__item> <a href=#scoping-strategy class=md-nav__link> <span class=md-ellipsis> Scoping Strategy </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> <nav class=md-nav aria-label=Troubleshooting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#token-not-seeing-expected-resources class=md-nav__link> <span class=md-ellipsis> Token Not Seeing Expected Resources </span> </a> </li> <li class=md-nav__item> <a href=#admin-token-being-restricted class=md-nav__link> <span class=md-ellipsis> Admin Token Being Restricted </span> </a> </li> <li class=md-nav__item> <a href=#inconsistent-results-between-endpoints class=md-nav__link> <span class=md-ellipsis> Inconsistent Results Between Endpoints </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#bootstrap-custom-roles class=md-nav__link> <span class=md-ellipsis> Bootstrap Custom Roles </span> </a> <nav class=md-nav aria-label="Bootstrap Custom Roles"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#role-definition-format class=md-nav__link> <span class=md-ellipsis> Role Definition Format </span> </a> </li> <li class=md-nav__item> <a href=#available-permissions class=md-nav__link> <span class=md-ellipsis> Available Permissions </span> </a> </li> <li class=md-nav__item> <a href=#docker-compose-example class=md-nav__link> <span class=md-ellipsis> Docker Compose Example </span> </a> </li> <li class=md-nav__item> <a href=#kuberneteshelm-example class=md-nav__link> <span class=md-ellipsis> Kubernetes/Helm Example </span> </a> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#related-documentation class=md-nav__link> <span class=md-ellipsis> Related Documentation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../teams/ class=md-nav__link> <span class=md-ellipsis> Team Management </span> </a> </li> <li class=md-nav__item> <a href=../admin-ui-customization/ class=md-nav__link> <span class=md-ellipsis> Admin UI Customization </span> </a> </li> <li class=md-nav__item> <a href=../ui-customization/ class=md-nav__link> <span class=md-ellipsis> Customizing the Admin UI </span> </a> </li> <li class=md-nav__item> <a href=../upgrade/ class=md-nav__link> <span class=md-ellipsis> Upgrading MCP Gateway and Managing Database Migrations </span> </a> </li> <li class=md-nav__item> <a href=../well-known-uris/ class=md-nav__link> <span class=md-ellipsis> Well-Known URI Configuration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Operations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Operations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operations/config-validation/ class=md-nav__link> <span class=md-ellipsis> Config Validation </span> </a> </li> <li class=md-nav__item> <a href=../../operations/cpu-spin-loop-mitigation/ class=md-nav__link> <span class=md-ellipsis> CPU Spin Loop Mitigation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <div class="md-nav__link md-nav__container"> <a href=../../development/ class="md-nav__link "> <span class=md-ellipsis> üíª Develop </span> </a> <label class="md-nav__link " for=__nav_7 id=__nav_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> üíª Develop </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../development/developer-onboarding/ class=md-nav__link> <span class=md-ellipsis> ‚úÖ Developer Onboarding Checklist </span> </a> </li> <li class=md-nav__item> <a href=../../development/mcp-developer-guide-json-rpc/ class=md-nav__link> <span class=md-ellipsis> MCP JSON RPC Guide </span> </a> </li> <li class=md-nav__item> <a href=../../development/github/ class=md-nav__link> <span class=md-ellipsis> GitHub Workflow Guide </span> </a> </li> <li class=md-nav__item> <a href=../../development/building/ class=md-nav__link> <span class=md-ellipsis> Building Locally </span> </a> </li> <li class=md-nav__item> <a href=../../development/documentation/ class=md-nav__link> <span class=md-ellipsis> Writing &amp; Publishing Documentation </span> </a> </li> <li class=md-nav__item> <a href=../../development/review/ class=md-nav__link> <span class=md-ellipsis> Reviewing a Pull Request </span> </a> </li> <li class=md-nav__item> <a href=../../development/packaging/ class=md-nav__link> <span class=md-ellipsis> Packaging &amp; Distribution </span> </a> </li> <li class=md-nav__item> <a href=../../development/developer-workstation/ class=md-nav__link> <span class=md-ellipsis> Developer Workstation </span> </a> </li> <li class=md-nav__item> <a href=../../development/doctest-coverage/ class=md-nav__link> <span class=md-ellipsis> Doctest Coverage </span> </a> </li> <li class=md-nav__item> <a href=../../development/module-documentation/ class=md-nav__link> <span class=md-ellipsis> Module documentation </span> </a> </li> <li class=md-nav__item> <a href=../../development/db-performance/ class=md-nav__link> <span class=md-ellipsis> Database Performance Observability Guide </span> </a> </li> <li class=md-nav__item> <a href=../../development/profiling/ class=md-nav__link> <span class=md-ellipsis> Performance Profiling Guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <div class="md-nav__link md-nav__container"> <a href=../../testing/ class="md-nav__link "> <span class=md-ellipsis> üß™ Test </span> </a> <label class="md-nav__link " for=__nav_8 id=__nav_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> üß™ Test </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../testing/unittest/ class=md-nav__link> <span class=md-ellipsis> Unittest </span> </a> </li> <li class=md-nav__item> <a href=../../testing/basic/ class=md-nav__link> <span class=md-ellipsis> MCP Gateway - Basic </span> </a> </li> <li class=md-nav__item> <a href=../../testing/entra-id-e2e/ class=md-nav__link> <span class=md-ellipsis> Microsoft Entra ID E2E Testing </span> </a> </li> <li class=md-nav__item> <a href=../../testing/performance/ class=md-nav__link> <span class=md-ellipsis> Performance Testing </span> </a> </li> <li class=md-nav__item> <a href=../../testing/acceptance/ class=md-nav__link> <span class=md-ellipsis> MCP Gateway Manual Acceptance Testing </span> </a> </li> <li class=md-nav__item> <a href=../../testing/fuzzing/ class=md-nav__link> <span class=md-ellipsis> Fuzz Testing </span> </a> </li> <li class=md-nav__item> <a href=../../testing/LocalTest/ class=md-nav__link> <span class=md-ellipsis> Local - lite load testing and monitoring </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <div class="md-nav__link md-nav__container"> <a href=../../architecture/ class="md-nav__link "> <span class=md-ellipsis> üìê Design &amp; Roadmap </span> </a> <label class="md-nav__link " for=__nav_9 id=__nav_9_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> üìê Design &amp; Roadmap </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/roadmap/ class=md-nav__link> <span class=md-ellipsis> Roadmap </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/performance-architecture/ class=md-nav__link> <span class=md-ellipsis> Performance Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/security-features/ class=md-nav__link> <span class=md-ellipsis> Security Features </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/plugins/ class=md-nav__link> <span class=md-ellipsis> Plugin Framework </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/export-import-architecture/ class=md-nav__link> <span class=md-ellipsis> Export-Import Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/multitenancy/ class=md-nav__link> <span class=md-ellipsis> Multitenancy </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/oauth-design/ class=md-nav__link> <span class=md-ellipsis> OAuth </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/oauth-authorization-code-ui-design/ class=md-nav__link> <span class=md-ellipsis> OAuth UI </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_10> <div class="md-nav__link md-nav__container"> <a href=../../architecture/adr/ class="md-nav__link "> <span class=md-ellipsis> Decision Records </span> </a> <label class="md-nav__link " for=__nav_9_10 id=__nav_9_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_10_label aria-expanded=false> <label class=md-nav__title for=__nav_9_10> <span class="md-nav__icon md-icon"></span> Decision Records </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/adr/001-adopt-fastapi-pydantic/ class=md-nav__link> <span class=md-ellipsis> 1 Adopt FastAPI + Pydantic </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/002-use-async-sqlalchemy-orm/ class=md-nav__link> <span class=md-ellipsis> 2 Use Async SQLAlchemy ORM </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/003-expose-multi-transport-endpoints/ class=md-nav__link> <span class=md-ellipsis> 3 Expose Multi-Transport Endpoints </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/004-combine-jwt-and-basic-auth/ class=md-nav__link> <span class=md-ellipsis> 4 Combine JWT &amp; Basic Auth </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/005-structured-json-logging/ class=md-nav__link> <span class=md-ellipsis> 5 Structured JSON Logging </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/005-vscode-devcontainer-support/ class=md-nav__link> <span class=md-ellipsis> 5b VS Code Dev Container Support </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/006-gateway-tool-rate-limiting/ class=md-nav__link> <span class=md-ellipsis> 6 Gateway &amp; Tool-Level Rate Limiting </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/007-pluggable-cache-backend/ class=md-nav__link> <span class=md-ellipsis> 7 Pluggable Cache Backend </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/008-federation-discovery/ class=md-nav__link> <span class=md-ellipsis> 8 Federation &amp; Auto-Discovery via DNS-SD </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/009-built-in-health-checks/ class=md-nav__link> <span class=md-ellipsis> 9 Built-in Health Checks </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/010-observability-prometheus/ class=md-nav__link> <span class=md-ellipsis> 10 Observability via Prometheus </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/011-tool-federation/ class=md-nav__link> <span class=md-ellipsis> 11 Namespaced Tool Federation </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/012-dropdown-ui-tool-selection/ class=md-nav__link> <span class=md-ellipsis> 12 Drop-down tool selection </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/013-APIs-for-server-connection-strings/ class=md-nav__link> <span class=md-ellipsis> 13 APIs for server connection string </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/014-security-headers-cors-middleware/ class=md-nav__link> <span class=md-ellipsis> 14 Security Headers &amp; CORS Middleware </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/015-well-known-uri-handler/ class=md-nav__link> <span class=md-ellipsis> 15 Well-known URI Handler </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/016-plugin-framework-ai-middleware/ class=md-nav__link> <span class=md-ellipsis> 16 Plugin Framework &amp; AI Middleware </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/017-adopt-orjson-json-serialization/ class=md-nav__link> <span class=md-ellipsis> 17 Adopt orjson for High-Performance JSON </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/018-built-in-response-compression/ class=md-nav__link> <span class=md-ellipsis> 18 Built-in Response Compression </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/019-modular-architecture-split/ class=md-nav__link> <span class=md-ellipsis> 19 Modular Architecture Split (14 Modules) </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/020-multi-format-packaging-strategy/ class=md-nav__link> <span class=md-ellipsis> 20 Multi-Format Packaging Strategy </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/021-built-in-proxy-vs-service-mesh/ class=md-nav__link> <span class=md-ellipsis> 21 Built-in Proxy vs Service Mesh </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/022-elicitation-passthrough-implementation/ class=md-nav__link> <span class=md-ellipsis> 22 Elicitation Passthrough Implementation </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/023-one-time-authentication-servers/ class=md-nav__link> <span class=md-ellipsis> 23 One-Time Authentication Servers </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/024-uvicorn-standard-extras/ class=md-nav__link> <span class=md-ellipsis> 24 Uvicorn Standard Extras </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/025-granian-http-server/ class=md-nav__link> <span class=md-ellipsis> 25 Granian HTTP Server </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/026-hiredis-redis-parser/ class=md-nav__link> <span class=md-ellipsis> 26 Hiredis Redis Parser </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/027-migrate-psycopg3/ class=md-nav__link> <span class=md-ellipsis> 27 Migrate Psycopg3 </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/028-auth-caching/ class=md-nav__link> <span class=md-ellipsis> 28 Auth Caching </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/029-registry-admin-stats-caching/ class=md-nav__link> <span class=md-ellipsis> 29 Registry Admin Stats Caching </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/030-metrics-cleanup-rollup/ class=md-nav__link> <span class=md-ellipsis> 30 Metrics Cleanup Rollup </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/031-parallel-session-cleanup/ class=md-nav__link> <span class=md-ellipsis> 31 Parallel Session Cleanup </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/032-mcp-session-pool/ class=md-nav__link> <span class=md-ellipsis> 32 MCP Session Pool </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/033-tool-lookup-cache/ class=md-nav__link> <span class=md-ellipsis> 33 Tool Lookup Cache </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/034-sso-admin-sync-config-precedence/ class=md-nav__link> <span class=md-ellipsis> 34 SSO Admin Sync &amp; Config Precedence </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/034-centralized-notification-service/ class=md-nav__link> <span class=md-ellipsis> 34b Centralized Notification Service </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/035-query-parameter-authentication/ class=md-nav__link> <span class=md-ellipsis> 35 Query Parameter Authentication </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/036-bootstrap-custom-roles/ class=md-nav__link> <span class=md-ellipsis> 36 Bootstrap Custom Roles </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/037-external-plugin-stdio-launch/ class=md-nav__link> <span class=md-ellipsis> 37 External Plugin Stdio Launch </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/038-multi-worker-session-affinity/ class=md-nav__link> <span class=md-ellipsis> 38b Multi-Worker Session Affinity </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/039-adopt-fully-independent-plugin-crates-architecture/ class=md-nav__link> <span class=md-ellipsis> 39 Adopt Fully Independent Plugin Crates Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/adr/040-flexible-admin-ui-sections/ class=md-nav__link> <span class=md-ellipsis> 40 Flexible Admin UI Section Visibility </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10> <div class="md-nav__link md-nav__container"> <a href=../../media/ class="md-nav__link "> <span class=md-ellipsis> üì∞ Media </span> </a> <label class="md-nav__link " for=__nav_10 id=__nav_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> üì∞ Media </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10_2> <div class="md-nav__link md-nav__container"> <a href=../../media/kit/ class="md-nav__link "> <span class=md-ellipsis> Media Kit </span> </a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_10_2_label aria-expanded=false> <label class=md-nav__title for=__nav_10_2> <span class="md-nav__icon md-icon"></span> Media Kit </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10_3> <div class="md-nav__link md-nav__container"> <a href=../../media/press/ class="md-nav__link "> <span class=md-ellipsis> Press </span> </a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_10_3_label aria-expanded=false> <label class=md-nav__title for=__nav_10_3> <span class="md-nav__icon md-icon"></span> Press </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10_4> <div class="md-nav__link md-nav__container"> <a href=../../media/social/ class="md-nav__link "> <span class=md-ellipsis> Social </span> </a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_10_4_label aria-expanded=false> <label class=md-nav__title for=__nav_10_4> <span class="md-nav__icon md-icon"></span> Social </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_11> <div class="md-nav__link md-nav__container"> <a href=../../tutorials/ class="md-nav__link "> <span class=md-ellipsis> üìñ Tutorials </span> </a> <label class="md-nav__link " for=__nav_11 id=__nav_11_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_11_label aria-expanded=false> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> üìñ Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/argocd-helm-deployment-ibm-cloud-iks/ class=md-nav__link> <span class=md-ellipsis> üöÄ Deploying the MCP Gateway Stack to IBM Cloud Kubernetes Service with Argo CD </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/openwebui-tutorial/ class=md-nav__link> <span class=md-ellipsis> OpenWebUI with Ollama, LiteLLM, MCPO, and MCP Gateway Deployment Guide </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/dcr-hyprmcp/ class=md-nav__link> <span class=md-ellipsis> Dynamic Client Registration with HyprMCP </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12> <label class=md-nav__link for=__nav_12 id=__nav_12_label tabindex=0> <span class=md-ellipsis> ‚≠ê Best Practices </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_12_label aria-expanded=false> <label class=md-nav__title for=__nav_12> <span class="md-nav__icon md-icon"></span> ‚≠ê Best Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../best-practices/selecting-an-mcp-gateway/ class=md-nav__link> <span class=md-ellipsis> Why use an MCP Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/mcp-architecture-patterns/ class=md-nav__link> <span class=md-ellipsis> üìê MCP Architecture Patterns </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/mcp-best-practices/ class=md-nav__link> <span class=md-ellipsis> ‚≠ê Best Practices Guide </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/input-validation/ class=md-nav__link> <span class=md-ellipsis> üîí Input Validation </span> </a> </li> <li class=md-nav__item> <a href=../../best-practices/developing-your-mcp-server-python/ class=md-nav__link> <span class=md-ellipsis> üõ†Ô∏è Write an MCP Server in Python </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_13> <div class="md-nav__link md-nav__container"> <a href=../../faq/ class="md-nav__link "> <span class=md-ellipsis> ‚ùì FAQ </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_13_label aria-expanded=false> <label class=md-nav__title for=__nav_13> <span class="md-nav__icon md-icon"></span> ‚ùì FAQ </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ibm/mcp-context-forge/edit/main/docs/docs/manage/rbac.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.06 9 .94.94L5.92 19H5v-.92zm3.6-6c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"></path></svg> </a> <h1 id=rbac-configuration>RBAC Configuration<a class=headerlink href=#rbac-configuration title="Permanent link">¬∂</a></h1> <p>Role-based access control (RBAC) defines which actions users or teams can perform in MCP Gateway. This document covers the two-layer security model, token scoping semantics, permission system, and best practices for access control.</p> <hr> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">¬∂</a></h2> <p>MCP Gateway implements a <strong>two-layer security model</strong>:</p> <ol> <li><strong>Token Scoping (Layer 1)</strong>: Controls what resources a user CAN SEE (data filtering)</li> <li><strong>RBAC (Layer 2)</strong>: Controls what actions a user CAN DO (action authorization)</li> </ol> <p>Both layers must pass for an operation to succeed.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>‚îÇ                      Two-Layer Security Model                               ‚îÇ
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>‚îÇ                                                                             ‚îÇ
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>‚îÇ   Request ‚Üí Authentication ‚Üí Token Scoping ‚Üí RBAC Check ‚Üí Operation        ‚îÇ
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>‚îÇ                              (Can See?)       (Can Do?)                     ‚îÇ
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>‚îÇ                                                                             ‚îÇ
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>‚îÇ   ‚îÇ   JWT    ‚îÇ   ‚îÇ  User    ‚îÇ   ‚îÇ Resource ‚îÇ   ‚îÇPermission‚îÇ   ‚îÇ Execute  ‚îÇ ‚îÇ
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>‚îÇ   ‚îÇ  Token   ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ Identity ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ  Access  ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ  Check   ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ Operation‚îÇ ‚îÇ
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>‚îÇ   ‚îÇ          ‚îÇ   ‚îÇ          ‚îÇ   ‚îÇ          ‚îÇ   ‚îÇ          ‚îÇ   ‚îÇ          ‚îÇ ‚îÇ
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>‚îÇ                                                                             ‚îÇ
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span></code></pre></div> <h3 id=authentication-methods>Authentication Methods<a class=headerlink href=#authentication-methods title="Permanent link">¬∂</a></h3> <table> <thead> <tr> <th>Method</th> <th>Priority</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>JWT Token</td> <td>1 (Primary)</td> <td>Signature verified, supports teams/scopes claims</td> </tr> <tr> <td>Plugin Auth</td> <td>0 (Before JWT)</td> <td><code>HTTP_AUTH_RESOLVE_USER</code> hook can provide custom auth</td> </tr> <tr> <td>API Token (DB)</td> <td>2 (Fallback)</td> <td>Legacy database-stored tokens</td> </tr> <tr> <td>Proxy Header</td> <td>3</td> <td>When <code>MCP_CLIENT_AUTH_ENABLED=false</code> AND <code>TRUST_PROXY_AUTH=true</code></td> </tr> <tr> <td>Anonymous</td> <td>4</td> <td>When <code>AUTH_REQUIRED=false</code> (development only)</td> </tr> </tbody> </table> <hr> <h2 id=core-concepts>Core Concepts<a class=headerlink href=#core-concepts title="Permanent link">¬∂</a></h2> <h3 id=subjects>Subjects<a class=headerlink href=#subjects title="Permanent link">¬∂</a></h3> <p>Users authenticated via:</p> <ul> <li>JWT tokens (session or API)</li> <li>SSO providers (OAuth 2.0/OIDC)</li> <li>Basic authentication (development only)</li> </ul> <h3 id=teams>Teams<a class=headerlink href=#teams title="Permanent link">¬∂</a></h3> <p>Logical groups that:</p> <ul> <li>Organize users for access boundaries</li> <li>Own resources (tools, prompts, resources)</li> <li>Map from external identity providers (SSO groups)</li> </ul> <h3 id=built-in-rbac-roles>Built-in RBAC Roles<a class=headerlink href=#built-in-rbac-roles title="Permanent link">¬∂</a></h3> <table> <thead> <tr> <th>Role</th> <th>Scope</th> <th>Permissions</th> </tr> </thead> <tbody> <tr> <td><code>platform_admin</code></td> <td>global</td> <td><code>["*"]</code> (all permissions)</td> </tr> <tr> <td><code>team_admin</code></td> <td>team</td> <td>admin.dashboard, gateways.read, gateways.create, gateways.update, gateways.delete, servers.read, servers.create, servers.update, servers.delete, teams.read, teams.update, teams.join, teams.delete, teams.manage_members, tools.read, tools.create, tools.update, tools.delete, tools.execute, resources.read, resources.create, resources.update, resources.delete, prompts.read, prompts.create, prompts.update, prompts.delete, a2a.read, a2a.create, a2a.update, a2a.delete, a2a.invoke</td> </tr> <tr> <td><code>developer</code></td> <td>team</td> <td>admin.dashboard, gateways.read, gateways.create, gateways.update, gateways.delete, servers.read, servers.create, servers.update, servers.delete, teams.join, tools.read, tools.create, tools.update, tools.delete, tools.execute, resources.read, resources.create, resources.update, resources.delete, prompts.read, prompts.create, prompts.update, prompts.delete, a2a.read, a2a.create, a2a.update, a2a.delete, a2a.invoke</td> </tr> <tr> <td><code>viewer</code></td> <td>team</td> <td>admin.dashboard, gateways.read, servers.read, teams.join, tools.read, resources.read, prompts.read, a2a.read</td> </tr> <tr> <td><code>platform_viewer</code></td> <td>global</td> <td>admin.dashboard, gateways.read, servers.read, teams.join, tools.read, resources.read, prompts.read, a2a.read</td> </tr> </tbody> </table> <div class="admonition info"> <p class=admonition-title>Default Role Assignment</p> <p><strong>New users automatically receive up to two roles upon creation:</strong></p> <p><strong>Admin users</strong> (<code>is_admin: true</code>) receive:</p> <ol> <li><code>platform_admin</code> role with <strong>global scope</strong> (<code>scope_id</code> = None)</li> <li>Grants unrestricted access to all platform resources</li> <li><code>team_admin</code> role with <strong>team scope</strong> (<code>scope_id</code> = personal team ID)</li> <li>Grants full management of their personal team resources</li> <li>Only assigned if personal team creation succeeds</li> </ol> <p><strong>Non-admin users</strong> (<code>is_admin: false</code>) receive:</p> <ol> <li><code>platform_viewer</code> role with <strong>global scope</strong> (<code>scope_id</code> = None)</li> <li>Grants read-only access to all platform resources</li> <li><code>team_admin</code> role with <strong>team scope</strong> (<code>scope_id</code> = personal team ID)</li> <li>Grants full management of their personal team resources</li> <li>Only assigned if personal team creation succeeds</li> </ol> <p>This dual-role approach ensures: - Users always have appropriate global visibility (via <code>platform_admin</code> or <code>platform_viewer</code>) - Users can fully manage their personal team resources (via team-scoped <code>team_admin</code>, when available) - Clear separation between team-level and platform-level permissions</p> <p>The <code>granted_by</code> field tracks which admin created the user for audit purposes.</p> </div> <div class="admonition note"> <p class=admonition-title>Existing Users Migration</p> <p>An Alembic migration (<code>v1a2b3c4d5e6</code>) automatically updates existing users without roles:</p> <p><strong>Previous behavior (before migration):</strong> - Admin users: Only <code>platform_admin</code> with global scope (<code>scope_id</code> = None) - Non-admin users: Only <code>viewer</code> with team scope (<code>scope_id</code> = None)</p> <p><strong>After migration:</strong></p> <p><strong>Admin users</strong> receive:</p> <ol> <li><code>team_admin</code> role with <strong>team scope</strong></li> <li><code>scope_id</code> = user's personal team ID (from <code>email_team_members</code> table)</li> <li>Enables management of personal team resources</li> <li><code>platform_admin</code> role with <strong>global scope</strong></li> <li><code>scope_id</code> = None</li> <li>Maintains unrestricted platform access</li> </ol> <p><strong>Non-admin users</strong> receive:</p> <ol> <li><code>team_admin</code> role with <strong>team scope</strong></li> <li><code>scope_id</code> = user's personal team ID (from <code>email_team_members</code> table)</li> <li>Enables management of personal team resources</li> <li><code>platform_viewer</code> role with <strong>global scope</strong></li> <li><code>scope_id</code> = None</li> <li>Provides read-only access to platform resources</li> </ol> <p><strong>Migration behavior:</strong> - Only affects users without existing role assignments - Users without a personal team still receive their global role (team_admin is skipped) - The platform admin (configured via <code>PLATFORM_ADMIN_EMAIL</code>) is excluded to preserve bootstrap configuration - Migration is idempotent and safe to run multiple times</p> </div> <h3 id=resources>Resources<a class=headerlink href=#resources title="Permanent link">¬∂</a></h3> <p>Protected entities:</p> <ul> <li>Servers (MCP gateways and virtual servers)</li> <li>Tools, Prompts, Resources (MCP primitives)</li> <li>System configuration and audit logs</li> </ul> <hr> <h2 id=token-scoping-model>Token Scoping Model<a class=headerlink href=#token-scoping-model title="Permanent link">¬∂</a></h2> <p>Token scoping controls what resources a token can access based on the <code>teams</code> claim in the JWT payload. The <code>normalize_token_teams()</code> function is the <strong>single source of truth</strong> for interpreting JWT team claims across all enforcement points.</p> <h3 id=token-scoping-contract>Token Scoping Contract<a class=headerlink href=#token-scoping-contract title="Permanent link">¬∂</a></h3> <p>The <code>teams</code> claim in JWT tokens determines resource visibility. The system follows a <strong>secure-first design</strong>: when in doubt, access is denied.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>‚îÇ                        Token Teams Claim Handling                           ‚îÇ
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>‚îÇ  JWT Claim State          ‚îÇ  is_admin: true       ‚îÇ  is_admin: false        ‚îÇ
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>‚îÇ  No "teams" key           ‚îÇ  PUBLIC-ONLY []       ‚îÇ  PUBLIC-ONLY []         ‚îÇ
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>‚îÇ  teams: null              ‚îÇ  ADMIN BYPASS (None)  ‚îÇ  PUBLIC-ONLY []         ‚îÇ
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>‚îÇ  teams: []                ‚îÇ  PUBLIC-ONLY []       ‚îÇ  PUBLIC-ONLY []         ‚îÇ
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>‚îÇ  teams: ["team-id"]       ‚îÇ  Team + Public        ‚îÇ  Team + Public          ‚îÇ
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>‚îÇ  teams: ["t1", "t2"]      ‚îÇ  Both Teams + Public  ‚îÇ  Both Teams + Public    ‚îÇ
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span></code></pre></div> <div class="admonition warning"> <p class=admonition-title>Admin Bypass Requirements</p> <p>Admin bypass (unrestricted access) requires <strong>BOTH</strong> conditions:</p> <ol> <li><code>teams: null</code> (explicit null, not missing key)</li> <li><code>is_admin: true</code></li> </ol> <p>A missing <code>teams</code> key always results in public-only access, even for admins. An empty <code>teams: []</code> also results in public-only access, even for admins.</p> </div> <h3 id=return-value-semantics>Return Value Semantics<a class=headerlink href=#return-value-semantics title="Permanent link">¬∂</a></h3> <table> <thead> <tr> <th>Return Value</th> <th>Meaning</th> <th>Query Behavior</th> </tr> </thead> <tbody> <tr> <td><code>None</code></td> <td>Admin bypass</td> <td>Skip ALL team filtering</td> </tr> <tr> <td><code>[]</code> (empty list)</td> <td>Public-only</td> <td>Filter to <code>visibility='public'</code> ONLY</td> </tr> <tr> <td><code>["t1", "t2"]</code></td> <td>Team-scoped</td> <td>Filter to team resources + public</td> </tr> </tbody> </table> <h3 id=security-design-principles>Security Design Principles<a class=headerlink href=#security-design-principles title="Permanent link">¬∂</a></h3> <ol> <li> <p><strong>Secure-First Defaults</strong></p> </li> <li> <p>Missing <code>teams</code> key always returns <code>[]</code> (public-only access)</p> </li> <li> <p>This prevents accidental exposure when tokens are misconfigured</p> </li> <li> <p><strong>Explicit Admin Bypass</strong></p> </li> <li> <p>Admin bypass requires explicit <code>teams: null</code> AND <code>is_admin: true</code></p> </li> <li> <p>Empty teams <code>[]</code> disables bypass even for admins</p> </li> <li> <p><strong>Scoped Automation Tokens</strong></p> </li> <li> <p>Tokens with <code>teams: []</code> are intentionally restricted to public resources</p> </li> <li>Use case: CI/CD pipelines, monitoring systems, public API clients</li> </ol> <h3 id=token-scoping-flow>Token Scoping Flow<a class=headerlink href=#token-scoping-flow title="Permanent link">¬∂</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>                                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>                                 ‚îÇ   JWT Token      ‚îÇ
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>                                 ‚îÇ   Received       ‚îÇ
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>                                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>                                          ‚îÇ
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>                                          ‚ñº
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>                              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>                              ‚îÇ  Extract "teams"      ‚îÇ
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>                              ‚îÇ  claim from JWT       ‚îÇ
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a>                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a>                                          ‚îÇ
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a>                          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a>                          ‚îÇ                               ‚îÇ
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a>                          ‚ñº                               ‚ñº
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a>               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-2-16><a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a>               ‚îÇ "teams" key EXISTS  ‚îÇ       ‚îÇ "teams" key MISSING ‚îÇ
</span><span id=__span-2-17><a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a>               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span><span id=__span-2-18><a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a>                          ‚îÇ                             ‚îÇ
</span><span id=__span-2-19><a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a>                          ‚ñº                             ‚ñº
</span><span id=__span-2-20><a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a>               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-2-21><a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a>               ‚îÇ Check teams value   ‚îÇ       ‚îÇ Return []           ‚îÇ
</span><span id=__span-2-22><a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a>               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ PUBLIC-ONLY         ‚îÇ
</span><span id=__span-2-23><a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a>                          ‚îÇ                  ‚îÇ (secure default)    ‚îÇ
</span><span id=__span-2-24><a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a>          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span><span id=__span-2-25><a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a>          ‚îÇ               ‚îÇ               ‚îÇ
</span><span id=__span-2-26><a id=__codelineno-2-26 name=__codelineno-2-26 href=#__codelineno-2-26></a>          ‚ñº               ‚ñº               ‚ñº
</span><span id=__span-2-27><a id=__codelineno-2-27 name=__codelineno-2-27 href=#__codelineno-2-27></a>  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-2-28><a id=__codelineno-2-28 name=__codelineno-2-28 href=#__codelineno-2-28></a>  ‚îÇ teams: null   ‚îÇ ‚îÇ teams: [] ‚îÇ ‚îÇ teams: [...]  ‚îÇ
</span><span id=__span-2-29><a id=__codelineno-2-29 name=__codelineno-2-29 href=#__codelineno-2-29></a>  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span><span id=__span-2-30><a id=__codelineno-2-30 name=__codelineno-2-30 href=#__codelineno-2-30></a>          ‚îÇ               ‚îÇ               ‚îÇ
</span><span id=__span-2-31><a id=__codelineno-2-31 name=__codelineno-2-31 href=#__codelineno-2-31></a>          ‚ñº               ‚îÇ               ‚ñº
</span><span id=__span-2-32><a id=__codelineno-2-32 name=__codelineno-2-32 href=#__codelineno-2-32></a>  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-2-33><a id=__codelineno-2-33 name=__codelineno-2-33 href=#__codelineno-2-33></a>  ‚îÇ Check is_admin‚îÇ       ‚îÇ       ‚îÇ Return [...]  ‚îÇ
</span><span id=__span-2-34><a id=__codelineno-2-34 name=__codelineno-2-34 href=#__codelineno-2-34></a>  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ       ‚îÇ TEAM-SCOPED   ‚îÇ
</span><span id=__span-2-35><a id=__codelineno-2-35 name=__codelineno-2-35 href=#__codelineno-2-35></a>          ‚îÇ               ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span><span id=__span-2-36><a id=__codelineno-2-36 name=__codelineno-2-36 href=#__codelineno-2-36></a>    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
</span><span id=__span-2-37><a id=__codelineno-2-37 name=__codelineno-2-37 href=#__codelineno-2-37></a>    ‚îÇ           ‚îÇ         ‚îÇ
</span><span id=__span-2-38><a id=__codelineno-2-38 name=__codelineno-2-38 href=#__codelineno-2-38></a>    ‚ñº           ‚ñº         ‚ñº
</span><span id=__span-2-39><a id=__codelineno-2-39 name=__codelineno-2-39 href=#__codelineno-2-39></a>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-2-40><a id=__codelineno-2-40 name=__codelineno-2-40 href=#__codelineno-2-40></a>‚îÇ Admin  ‚îÇ ‚îÇNon-Adm ‚îÇ ‚îÇ Empty  ‚îÇ
</span><span id=__span-2-41><a id=__codelineno-2-41 name=__codelineno-2-41 href=#__codelineno-2-41></a>‚îÇ true   ‚îÇ ‚îÇ false  ‚îÇ ‚îÇ list   ‚îÇ
</span><span id=__span-2-42><a id=__codelineno-2-42 name=__codelineno-2-42 href=#__codelineno-2-42></a>‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
</span><span id=__span-2-43><a id=__codelineno-2-43 name=__codelineno-2-43 href=#__codelineno-2-43></a>‚îÇ Return ‚îÇ ‚îÇ Return ‚îÇ ‚îÇ Return ‚îÇ
</span><span id=__span-2-44><a id=__codelineno-2-44 name=__codelineno-2-44 href=#__codelineno-2-44></a>‚îÇ None   ‚îÇ ‚îÇ []     ‚îÇ ‚îÇ []     ‚îÇ
</span><span id=__span-2-45><a id=__codelineno-2-45 name=__codelineno-2-45 href=#__codelineno-2-45></a>‚îÇ BYPASS ‚îÇ ‚îÇ PUBLIC ‚îÇ ‚îÇ PUBLIC ‚îÇ
</span><span id=__span-2-46><a id=__codelineno-2-46 name=__codelineno-2-46 href=#__codelineno-2-46></a>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Key Insight</p> <p>The difference between <code>teams: null</code> and missing <code>teams</code> key is critical:</p> <ul> <li><strong>Missing key</strong>: Always <code>[]</code> (public-only) - secure default</li> <li><strong>Explicit null</strong>: Admin bypass when <code>is_admin: true</code>, otherwise <code>[]</code></li> </ul> </div> <h3 id=visibility-levels>Visibility Levels<a class=headerlink href=#visibility-levels title="Permanent link">¬∂</a></h3> <p>Resources in MCP Gateway have three visibility levels:</p> <table> <thead> <tr> <th>Visibility</th> <th>Description</th> <th>Who Can See</th> </tr> </thead> <tbody> <tr> <td><code>public</code></td> <td>Accessible to all authenticated users</td> <td>Everyone with valid token</td> </tr> <tr> <td><code>team</code></td> <td>Accessible to team members only</td> <td>Team members + admins (with bypass)</td> </tr> <tr> <td><code>private</code></td> <td>Accessible to owner only</td> <td>Resource owner + admins (with bypass)</td> </tr> </tbody> </table> <h3 id=access-matrix-by-token-type>Access Matrix by Token Type<a class=headerlink href=#access-matrix-by-token-type title="Permanent link">¬∂</a></h3> <table> <thead> <tr> <th>Token Type</th> <th>Public Resources</th> <th>Team Resources</th> <th>Private Resources</th> </tr> </thead> <tbody> <tr> <td>Admin Bypass (<code>teams=null</code>, <code>is_admin=true</code>)</td> <td>‚úÖ</td> <td>‚úÖ (all teams)</td> <td>‚úÖ (all)</td> </tr> <tr> <td>Team-Scoped (<code>teams=["t1"]</code>)</td> <td>‚úÖ</td> <td>‚úÖ (own team)</td> <td>‚úÖ (own only)</td> </tr> <tr> <td>Public-Only (<code>teams=[]</code>)</td> <td>‚úÖ</td> <td>‚ùå</td> <td>‚ùå</td> </tr> </tbody> </table> <div class="admonition warning"> <p class=admonition-title>Public-Only Token Limitations</p> <p><strong>Public-only tokens (<code>teams=[]</code>) cannot access private resources, even if the resource is owned by the token's user.</strong></p> <p>This is intentional security behavior - public-only tokens are designed for limited-scope access to public resources only. To access private resources, users must use a team-scoped token that includes their personal team.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a># Public-only token behavior:
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a># ‚úÖ Can access: visibility='public' resources
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a># ‚ùå Cannot access: visibility='team' resources (any team)
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a># ‚ùå Cannot access: visibility='private' resources (even if owned by user)
</span></code></pre></div> </div> <h3 id=enforcement-points>Enforcement Points<a class=headerlink href=#enforcement-points title="Permanent link">¬∂</a></h3> <p>Token scoping is enforced consistently across all access paths:</p> <table> <thead> <tr> <th>Location</th> <th>Token Scoping</th> <th>RBAC</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>Token Scoping Middleware</td> <td>‚úÖ</td> <td>N/A</td> <td>Request-level data filtering</td> </tr> <tr> <td>REST API Endpoints</td> <td>‚úÖ</td> <td>‚úÖ</td> <td><code>@require_permission</code> decorators</td> </tr> <tr> <td>RPC Handler (<code>/rpc</code>)</td> <td>‚úÖ</td> <td>Varies</td> <td>Method-specific permission checks</td> </tr> <tr> <td>Admin UI</td> <td>‚úÖ</td> <td>‚úÖ</td> <td>Permission-based UI rendering</td> </tr> <tr> <td>Service Layer</td> <td>‚úÖ</td> <td>N/A</td> <td>Database query filtering</td> </tr> <tr> <td>WebSocket</td> <td>‚úÖ</td> <td>‚úÖ</td> <td>Forwards auth to /rpc</td> </tr> <tr> <td>MCP Transport</td> <td>‚úÖ</td> <td>N/A</td> <td>Streamable HTTP protocol filtering</td> </tr> </tbody> </table> <hr> <h2 id=token-types-and-use-cases>Token Types and Use Cases<a class=headerlink href=#token-types-and-use-cases title="Permanent link">¬∂</a></h2> <h3 id=session-tokens-ui-login>Session Tokens (UI Login)<a class=headerlink href=#session-tokens-ui-login title="Permanent link">¬∂</a></h3> <p>Generated when users log in via the Admin UI:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=p>{</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=nt>"sub"</span><span class=p>:</span><span class=w> </span><span class=s2>"admin@example.com"</span><span class=p>,</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>  </span><span class=nt>"is_admin"</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>  </span><span class=nt>"teams"</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>  </span><span class=nt>"iss"</span><span class=p>:</span><span class=w> </span><span class=s2>"mcpgateway"</span><span class=p>,</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>  </span><span class=nt>"aud"</span><span class=p>:</span><span class=w> </span><span class=s2>"mcpgateway-api"</span><span class=p>,</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>  </span><span class=nt>"exp"</span><span class=p>:</span><span class=w> </span><span class=mi>1234567890</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Behavior</strong>: Admin session tokens should set <code>teams: null</code> (explicit null) combined with <code>is_admin: true</code> to enable admin bypass (unrestricted access to all resources).</p> <h3 id=api-tokens-programmatic-access>API Tokens (Programmatic Access)<a class=headerlink href=#api-tokens-programmatic-access title="Permanent link">¬∂</a></h3> <p>Generated via the Admin UI or API for automation:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=p>{</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>"sub"</span><span class=p>:</span><span class=w> </span><span class=s2>"service-account@example.com"</span><span class=p>,</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>  </span><span class=nt>"is_admin"</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>  </span><span class=nt>"teams"</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>"team-uuid-1"</span><span class=p>,</span><span class=w> </span><span class=s2>"team-uuid-2"</span><span class=p>],</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>  </span><span class=nt>"iss"</span><span class=p>:</span><span class=w> </span><span class=s2>"mcpgateway"</span><span class=p>,</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>  </span><span class=nt>"aud"</span><span class=p>:</span><span class=w> </span><span class=s2>"mcpgateway-api"</span><span class=p>,</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>  </span><span class=nt>"exp"</span><span class=p>:</span><span class=w> </span><span class=mi>1234567890</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Behavior</strong>: Access restricted to public resources plus resources owned by specified teams.</p> <h3 id=scoped-automation-tokens>Scoped Automation Tokens<a class=headerlink href=#scoped-automation-tokens title="Permanent link">¬∂</a></h3> <p>For CI/CD, monitoring, or public API access:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=p>{</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>  </span><span class=nt>"sub"</span><span class=p>:</span><span class=w> </span><span class=s2>"ci-pipeline@example.com"</span><span class=p>,</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>  </span><span class=nt>"is_admin"</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>  </span><span class=nt>"teams"</span><span class=p>:</span><span class=w> </span><span class=p>[],</span><span class=w>  </span><span class=c1>// Explicitly empty = public-only</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>  </span><span class=nt>"iss"</span><span class=p>:</span><span class=w> </span><span class=s2>"mcpgateway"</span><span class=p>,</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>  </span><span class=nt>"aud"</span><span class=p>:</span><span class=w> </span><span class=s2>"mcpgateway-api"</span><span class=p>,</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>  </span><span class=nt>"exp"</span><span class=p>:</span><span class=w> </span><span class=mi>1234567890</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Behavior</strong>: Even admin tokens with <code>teams: []</code> are restricted to public resources only. This enables creating limited-scope tokens for automation that shouldn't access team-internal resources.</p> <hr> <h2 id=generating-scoped-tokens>Generating Scoped Tokens<a class=headerlink href=#generating-scoped-tokens title="Permanent link">¬∂</a></h2> <h3 id=using-the-cli-tool>Using the CLI Tool<a class=headerlink href=#using-the-cli-tool title="Permanent link">¬∂</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1># Unrestricted admin token (no teams key)</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>python3<span class=w> </span>-m<span class=w> </span>mcpgateway.utils.create_jwt_token<span class=w> </span><span class=se>\</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>  </span>--username<span class=w> </span>admin@example.com<span class=w> </span><span class=se>\</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>  </span>--exp<span class=w> </span><span class=m>60</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>  </span>--secret<span class=w> </span><span class=nv>$JWT_SECRET_KEY</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=c1># Team-scoped token</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>python3<span class=w> </span>-m<span class=w> </span>mcpgateway.utils.create_jwt_token<span class=w> </span><span class=se>\</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=w>  </span>--username<span class=w> </span>user@example.com<span class=w> </span><span class=se>\</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=w>  </span>--exp<span class=w> </span><span class=m>60</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=w>  </span>--secret<span class=w> </span><span class=nv>$JWT_SECRET_KEY</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=w>  </span>--teams<span class=w> </span><span class=s1>'["team-uuid-1"]'</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=c1># Public-only scoped token (for automation)</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a>python3<span class=w> </span>-m<span class=w> </span>mcpgateway.utils.create_jwt_token<span class=w> </span><span class=se>\</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a><span class=w>  </span>--username<span class=w> </span>ci@example.com<span class=w> </span><span class=se>\</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a><span class=w>  </span>--exp<span class=w> </span><span class=m>60</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a><span class=w>  </span>--secret<span class=w> </span><span class=nv>$JWT_SECRET_KEY</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a><span class=w>  </span>--teams<span class=w> </span><span class=s1>'[]'</span>
</span></code></pre></div> <h3 id=using-the-admin-ui>Using the Admin UI<a class=headerlink href=#using-the-admin-ui title="Permanent link">¬∂</a></h3> <ol> <li>Navigate to <strong>Admin UI ‚Üí Tokens</strong></li> <li>Click <strong>Create Token</strong></li> <li> <p>Select team scope:</p> </li> <li> <p><strong>No team selected</strong>: Public resources only (secure default)</p> </li> <li> <p><strong>Specific team(s)</strong>: Team + public resources</p> </li> <li> <p>Configure additional restrictions (IP, permissions, expiry)</p> </li> </ol> <div class="admonition warning"> <p class=admonition-title>Token Scope Warning</p> <p>Tokens created without selecting a team will have access to <strong>public resources only</strong>. This is the secure default to prevent accidental exposure of team resources.</p> </div> <hr> <h2 id=permission-system>Permission System<a class=headerlink href=#permission-system title="Permanent link">¬∂</a></h2> <h3 id=permission-categories>Permission Categories<a class=headerlink href=#permission-categories title="Permanent link">¬∂</a></h3> <p>Permissions are defined in the <code>Permissions</code> class and control what actions users can perform:</p> <table> <thead> <tr> <th>Category</th> <th>Permissions</th> </tr> </thead> <tbody> <tr> <td><strong>Users</strong></td> <td>users.create, users.read, users.update, users.delete, users.invite</td> </tr> <tr> <td><strong>Teams</strong></td> <td>teams.create, teams.read, teams.update, teams.delete, teams.join, teams.manage_members</td> </tr> <tr> <td><strong>Tools</strong></td> <td>tools.create, tools.read, tools.update, tools.delete, tools.execute</td> </tr> <tr> <td><strong>Resources</strong></td> <td>resources.create, resources.read, resources.update, resources.delete, resources.share</td> </tr> <tr> <td><strong>Gateways</strong></td> <td>gateways.create, gateways.read, gateways.update, gateways.delete</td> </tr> <tr> <td><strong>Prompts</strong></td> <td>prompts.create, prompts.read, prompts.update, prompts.delete, prompts.execute</td> </tr> <tr> <td><strong>Servers</strong></td> <td>servers.create, servers.read, servers.update, servers.delete, servers.manage</td> </tr> <tr> <td><strong>Tokens</strong></td> <td>tokens.create, tokens.read, tokens.update, tokens.revoke</td> </tr> <tr> <td><strong>Admin</strong></td> <td>admin.system_config, admin.user_management, admin.security_audit, admin.overview, admin.dashboard, admin.events, admin.grpc, admin.plugins</td> </tr> <tr> <td><strong>A2A</strong></td> <td>a2a.create, a2a.read, a2a.update, a2a.delete, a2a.invoke</td> </tr> <tr> <td><strong>Tags</strong></td> <td>tags.read, tags.create, tags.update, tags.delete</td> </tr> <tr> <td><strong>Wildcard</strong></td> <td><code>*</code> (all permissions)</td> </tr> </tbody> </table> <h3 id=permission-checking-flow>Permission Checking Flow<a class=headerlink href=#permission-checking-flow title="Permanent link">¬∂</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>@require_permission("resource.action")
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>    ‚îÇ
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>    ‚ñº
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>‚îÇ Extract user_context        ‚îÇ ‚Üê From request/kwargs
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>    ‚îÇ
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>    ‚ñº
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>‚îÇ Plugin Permission Hook      ‚îÇ ‚Üê HTTP_AUTH_CHECK_PERMISSION can override
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>    ‚îÇ (no plugin decision)
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a>    ‚ñº
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a>‚îÇ Admin Bypass Check          ‚îÇ ‚Üê If allow_admin_bypass=True AND user.is_admin
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a>    ‚îÇ (not admin or bypass disabled)
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a>    ‚ñº
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-8-20><a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a>‚îÇ Role Collection             ‚îÇ ‚Üê Get all active roles for user
</span><span id=__span-8-21><a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a>‚îÇ - Global scope roles        ‚îÇ
</span><span id=__span-8-22><a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a>‚îÇ - Personal scope roles      ‚îÇ
</span><span id=__span-8-23><a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a>‚îÇ - Team scope roles          ‚îÇ
</span><span id=__span-8-24><a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span><span id=__span-8-25><a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a>    ‚îÇ
</span><span id=__span-8-26><a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a>    ‚ñº
</span><span id=__span-8-27><a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-8-28><a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a>‚îÇ Permission Aggregation      ‚îÇ ‚Üê Collect permissions from roles
</span><span id=__span-8-29><a id=__codelineno-8-29 name=__codelineno-8-29 href=#__codelineno-8-29></a>‚îÇ - Include inherited perms   ‚îÇ   (role inheritance supported)
</span><span id=__span-8-30><a id=__codelineno-8-30 name=__codelineno-8-30 href=#__codelineno-8-30></a>‚îÇ - Check for wildcard (*)    ‚îÇ
</span><span id=__span-8-31><a id=__codelineno-8-31 name=__codelineno-8-31 href=#__codelineno-8-31></a>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span><span id=__span-8-32><a id=__codelineno-8-32 name=__codelineno-8-32 href=#__codelineno-8-32></a>    ‚îÇ
</span><span id=__span-8-33><a id=__codelineno-8-33 name=__codelineno-8-33 href=#__codelineno-8-33></a>    ‚ñº
</span><span id=__span-8-34><a id=__codelineno-8-34 name=__codelineno-8-34 href=#__codelineno-8-34></a>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span><span id=__span-8-35><a id=__codelineno-8-35 name=__codelineno-8-35 href=#__codelineno-8-35></a>‚îÇ Fallback Permission Check   ‚îÇ ‚Üê Implicit permissions (see below)
</span><span id=__span-8-36><a id=__codelineno-8-36 name=__codelineno-8-36 href=#__codelineno-8-36></a>‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span><span id=__span-8-37><a id=__codelineno-8-37 name=__codelineno-8-37 href=#__codelineno-8-37></a>    ‚îÇ
</span><span id=__span-8-38><a id=__codelineno-8-38 name=__codelineno-8-38 href=#__codelineno-8-38></a>    ‚ñº
</span><span id=__span-8-39><a id=__codelineno-8-39 name=__codelineno-8-39 href=#__codelineno-8-39></a>  GRANT or DENY
</span></code></pre></div> <h3 id=fallback-permissions>Fallback Permissions<a class=headerlink href=#fallback-permissions title="Permanent link">¬∂</a></h3> <p>The system grants implicit permissions without explicit role assignment. These are <strong>not</strong> shown in <code>/rbac/my/permissions</code> but are effective:</p> <table> <thead> <tr> <th>User Context</th> <th>Implicit Permissions</th> </tr> </thead> <tbody> <tr> <td>Any authenticated user</td> <td>teams.create, teams.read</td> </tr> <tr> <td>Team member</td> <td>teams.read (for their teams)</td> </tr> <tr> <td>Team owner</td> <td>teams.read, teams.update, teams.delete, teams.manage_members</td> </tr> <tr> <td>Any authenticated user</td> <td>tokens.* (for own tokens only)</td> </tr> </tbody> </table> <div class="admonition info"> <p class=admonition-title>Why Fallback Permissions Exist</p> <p>Fallback permissions enable basic functionality without requiring explicit role assignment:</p> <ul> <li>Users can always create and view teams they belong to</li> <li>Team owners automatically have management rights</li> <li>Users can always manage their own API tokens</li> </ul> </div> <h3 id=admin-api-rbac>Admin API RBAC<a class=headerlink href=#admin-api-rbac title="Permanent link">¬∂</a></h3> <p>The Admin API enforces <strong>strict RBAC</strong> where even users with <code>is_admin: true</code> must have explicit permissions granted. This enables <strong>delegated administration</strong> - granting specific admin capabilities without full superuser access.</p> <p><strong>Key behaviors:</strong></p> <table> <thead> <tr> <th>Aspect</th> <th>Behavior</th> </tr> </thead> <tbody> <tr> <td>Admin bypass</td> <td><code>allow_admin_bypass=False</code> on all admin routes</td> </tr> <tr> <td><code>is_admin</code> flag</td> <td>Does NOT bypass permission checks</td> </tr> <tr> <td>UI entry</td> <td>Requires any <code>admin.*</code> permission via <code>has_admin_permission()</code></td> </tr> <tr> <td>Route protection</td> <td>All 177 admin routes use <code>@require_permission</code> decorators</td> </tr> </tbody> </table> <p><strong>Example: Delegated Server Management</strong></p> <div class="language-json highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=p>{</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>  </span><span class=nt>"role"</span><span class=p>:</span><span class=w> </span><span class=s2>"server-manager"</span><span class=p>,</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>  </span><span class=nt>"permissions"</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span><span class=s2>"servers.read"</span><span class=p>,</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>    </span><span class=s2>"servers.create"</span><span class=p>,</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>    </span><span class=s2>"servers.update"</span><span class=p>,</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=w>    </span><span class=s2>"servers.delete"</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>  </span><span class=p>]</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=p>}</span>
</span></code></pre></div> <p>A user with this role can:</p> <ul> <li>‚úÖ Access <code>/admin/servers/*</code> endpoints</li> <li>‚úÖ View the Admin UI (has <code>servers.*</code> which satisfies <code>has_admin_permission()</code>)</li> <li>‚ùå Access <code>/admin/tools/*</code> endpoints (no <code>tools.*</code> permissions)</li> <li>‚ùå Access <code>/admin/gateways/*</code> endpoints (no <code>gateways.*</code> permissions)</li> </ul> <div class="admonition warning"> <p class=admonition-title>Platform Admin Role</p> <p>The built-in <code>platform_admin</code> role has <code>["*"]</code> (wildcard) permissions, which grants access to all operations. For delegated administration, create custom roles with specific permission sets.</p> </div> <hr> <h2 id=configuration-safety>Configuration Safety<a class=headerlink href=#configuration-safety title="Permanent link">¬∂</a></h2> <h3 id=development-vs-production-settings>Development vs Production Settings<a class=headerlink href=#development-vs-production-settings title="Permanent link">¬∂</a></h3> <p>The following configuration combinations require careful consideration:</p> <table> <thead> <tr> <th>Setting</th> <th>Value</th> <th>Impact</th> <th>Recommended Use</th> </tr> </thead> <tbody> <tr> <td><code>AUTH_REQUIRED</code></td> <td><code>false</code></td> <td>All requests granted admin access</td> <td>Development only</td> </tr> <tr> <td><code>TRUST_PROXY_AUTH</code></td> <td><code>true</code> + <code>MCP_CLIENT_AUTH_ENABLED=false</code></td> <td>Trust <code>X-Forwarded-User</code> header without verification</td> <td>Behind trusted reverse proxy only</td> </tr> </tbody> </table> <h3 id=proxy-authentication-mode>Proxy Authentication Mode<a class=headerlink href=#proxy-authentication-mode title="Permanent link">¬∂</a></h3> <p>When <code>MCP_CLIENT_AUTH_ENABLED=false</code> and <code>TRUST_PROXY_AUTH=true</code>:</p> <ul> <li>The gateway trusts the <code>X-Forwarded-User</code> header from upstream proxy</li> <li>No JWT validation or database verification is performed</li> <li><strong>Only use</strong> when deployed behind a trusted reverse proxy that handles authentication</li> </ul> <div class="admonition danger"> <p class=admonition-title>Security Warning</p> <p>Proxy authentication mode should only be used in trusted network environments where the reverse proxy is the only entry point to the gateway. Exposing the gateway directly to untrusted networks with this configuration allows header injection attacks.</p> </div> <h3 id=anonymous-mode-auth_requiredfalse>Anonymous Mode (AUTH_REQUIRED=false)<a class=headerlink href=#anonymous-mode-auth_requiredfalse title="Permanent link">¬∂</a></h3> <p>When <code>AUTH_REQUIRED=false</code>:</p> <ul> <li>All unauthenticated requests receive platform-admin context</li> <li><strong>Never use in production</strong> - all users have full admin access</li> <li>Intended only for local development and testing</li> </ul> <div class="admonition danger"> <p class=admonition-title>Production Warning</p> <p>Setting <code>AUTH_REQUIRED=false</code> in production grants administrative access to all requests. This completely bypasses authentication and authorization.</p> </div> <hr> <h2 id=best-practices>Best Practices<a class=headerlink href=#best-practices title="Permanent link">¬∂</a></h2> <h3 id=token-lifecycle>Token Lifecycle<a class=headerlink href=#token-lifecycle title="Permanent link">¬∂</a></h3> <ol> <li><strong>Use short expiration times</strong> for interactive sessions (hours)</li> <li><strong>Use longer expiration</strong> for service accounts with IP restrictions</li> <li><strong>Rotate tokens regularly</strong> (recommended: 90 days for long-lived tokens)</li> <li><strong>Revoke tokens immediately</strong> when access should be removed</li> </ol> <h3 id=team-organization>Team Organization<a class=headerlink href=#team-organization title="Permanent link">¬∂</a></h3> <ol> <li> <p><strong>Create purpose-specific teams</strong>:</p> </li> <li> <p><code>platform-admins</code> - Full administrative access</p> </li> <li><code>developers</code> - Development and testing resources</li> <li><code>ci-automation</code> - CI/CD pipeline access</li> <li> <p><code>monitoring</code> - Read-only observability access</p> </li> <li> <p><strong>Map SSO groups to teams</strong> for automatic membership management</p> </li> <li><strong>Use personal teams</strong> for individual resource ownership</li> </ol> <h3 id=scoping-strategy>Scoping Strategy<a class=headerlink href=#scoping-strategy title="Permanent link">¬∂</a></h3> <table> <thead> <tr> <th>Use Case</th> <th>Recommended Token Scope</th> </tr> </thead> <tbody> <tr> <td>Admin UI access</td> <td>Session token (<code>teams: null</code> + <code>is_admin: true</code>)</td> </tr> <tr> <td>CI/CD pipeline</td> <td><code>teams: []</code> (public-only)</td> </tr> <tr> <td>Service integration</td> <td>Specific team(s)</td> </tr> <tr> <td>Developer access</td> <td>Personal team + project teams</td> </tr> <tr> <td>Monitoring/alerting</td> <td><code>teams: []</code> with read permissions</td> </tr> </tbody> </table> <hr> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">¬∂</a></h2> <h3 id=token-not-seeing-expected-resources>Token Not Seeing Expected Resources<a class=headerlink href=#token-not-seeing-expected-resources title="Permanent link">¬∂</a></h3> <ol> <li> <p><strong>Check token claims</strong>: Decode the JWT to verify <code>teams</code> claim </p><div class="language-bash highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1># Decode JWT payload (middle section)</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=nb>echo</span><span class=w> </span><span class=s2>"</span><span class=nv>$TOKEN</span><span class=s2>"</span><span class=w> </span><span class=p>|</span><span class=w> </span>cut<span class=w> </span>-d.<span class=w> </span>-f2<span class=w> </span><span class=p>|</span><span class=w> </span>base64<span class=w> </span>-d<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.
</span></code></pre></div><p></p> </li> <li> <p><strong>Verify resource visibility</strong>: Check the resource's <code>visibility</code> and <code>team_id</code> </p><div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>curl<span class=w> </span>-H<span class=w> </span><span class=s2>"Authorization: Bearer </span><span class=nv>$ADMIN_TOKEN</span><span class=s2>"</span><span class=w> </span>/tools/<span class=o>{</span>id<span class=o>}</span><span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>'{visibility, teamId}'</span>
</span></code></pre></div><p></p> </li> <li> <p><strong>Check user admin status</strong>: Non-admin users without teams get public-only access</p> </li> </ol> <h3 id=admin-token-being-restricted>Admin Token Being Restricted<a class=headerlink href=#admin-token-being-restricted title="Permanent link">¬∂</a></h3> <p>If an admin token is unexpectedly restricted:</p> <ol> <li><strong>Check for explicit <code>teams</code> claim</strong>: <code>teams: []</code> restricts even admins</li> <li><strong>Verify <code>is_admin</code> flag</strong>: Must be <code>true</code> in JWT or database user</li> <li><strong>Check middleware logs</strong>: Look for "token_teams" in debug output</li> </ol> <h3 id=inconsistent-results-between-endpoints>Inconsistent Results Between Endpoints<a class=headerlink href=#inconsistent-results-between-endpoints title="Permanent link">¬∂</a></h3> <p>If REST and RPC endpoints return different results:</p> <ol> <li><strong>Check for caching</strong>: REST list endpoints may have cached data</li> <li><strong>Wait for cache TTL</strong>: Default is 60 seconds for registry cache</li> <li><strong>Use direct GET</strong>: <code>/tools/{id}</code> bypasses list cache</li> </ol> <hr> <h2 id=bootstrap-custom-roles>Bootstrap Custom Roles<a class=headerlink href=#bootstrap-custom-roles title="Permanent link">¬∂</a></h2> <p>MCP Gateway allows you to define custom roles that are automatically created during database bootstrap. This is useful for organizations that need to pre-configure roles before deployment.</p> <h3 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">¬∂</a></h3> <p>Enable custom role bootstrapping with these environment variables:</p> <table> <thead> <tr> <th>Variable</th> <th>Default</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>MCPGATEWAY_BOOTSTRAP_ROLES_IN_DB_ENABLED</code></td> <td><code>false</code></td> <td>Enable loading additional roles from file</td> </tr> <tr> <td><code>MCPGATEWAY_BOOTSTRAP_ROLES_IN_DB_FILE</code></td> <td><code>additional_roles_in_db.json</code></td> <td>Path to the JSON file containing role definitions</td> </tr> </tbody> </table> <h3 id=role-definition-format>Role Definition Format<a class=headerlink href=#role-definition-format title="Permanent link">¬∂</a></h3> <p>Create a JSON file containing an array of role definitions:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=p>[</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>  </span><span class=p>{</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>    </span><span class=nt>"name"</span><span class=p>:</span><span class=w> </span><span class=s2>"data_analyst"</span><span class=p>,</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>    </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Read-only access for data analysis"</span><span class=p>,</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>    </span><span class=nt>"scope"</span><span class=p>:</span><span class=w> </span><span class=s2>"team"</span><span class=p>,</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>    </span><span class=nt>"permissions"</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>"tools.read"</span><span class=p>,</span><span class=w> </span><span class=s2>"resources.read"</span><span class=p>,</span><span class=w> </span><span class=s2>"prompts.read"</span><span class=p>],</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>    </span><span class=nt>"is_system_role"</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=w>  </span><span class=p>{</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=w>    </span><span class=nt>"name"</span><span class=p>:</span><span class=w> </span><span class=s2>"auditor"</span><span class=p>,</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a><span class=w>    </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Compliance audit access"</span><span class=p>,</span>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=w>    </span><span class=nt>"scope"</span><span class=p>:</span><span class=w> </span><span class=s2>"global"</span><span class=p>,</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=w>    </span><span class=nt>"permissions"</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>"tools.read"</span><span class=p>,</span><span class=w> </span><span class=s2>"resources.read"</span><span class=p>,</span><span class=w> </span><span class=s2>"prompts.read"</span><span class=p>,</span><span class=w> </span><span class=s2>"servers.read"</span><span class=p>,</span><span class=w> </span><span class=s2>"gateways.read"</span><span class=p>],</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a><span class=w>    </span><span class=nt>"is_system_role"</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a><span class=p>]</span>
</span></code></pre></div> <p><strong>Required fields:</strong></p> <ul> <li><code>name</code> - Unique role name</li> <li><code>scope</code> - Either <code>team</code> (team-level access) or <code>global</code> (system-wide access)</li> <li><code>permissions</code> - Array of permission strings (e.g., <code>tools.read</code>, <code>resources.create</code>)</li> </ul> <p><strong>Optional fields:</strong></p> <ul> <li><code>description</code> - Human-readable description</li> <li><code>is_system_role</code> - Set to <code>true</code> to prevent users from modifying/deleting the role</li> </ul> <h3 id=available-permissions>Available Permissions<a class=headerlink href=#available-permissions title="Permanent link">¬∂</a></h3> <table> <thead> <tr> <th>Resource</th> <th>Permissions</th> </tr> </thead> <tbody> <tr> <td>Tools</td> <td><code>tools.create</code>, <code>tools.read</code>, <code>tools.update</code>, <code>tools.delete</code>, <code>tools.execute</code></td> </tr> <tr> <td>Resources</td> <td><code>resources.create</code>, <code>resources.read</code>, <code>resources.update</code>, <code>resources.delete</code></td> </tr> <tr> <td>Prompts</td> <td><code>prompts.create</code>, <code>prompts.read</code>, <code>prompts.update</code>, <code>prompts.delete</code></td> </tr> <tr> <td>Servers</td> <td><code>servers.create</code>, <code>servers.read</code>, <code>servers.update</code>, <code>servers.delete</code></td> </tr> <tr> <td>Gateways</td> <td><code>gateways.create</code>, <code>gateways.read</code>, <code>gateways.update</code>, <code>gateways.delete</code></td> </tr> <tr> <td>Teams</td> <td><code>teams.create</code>, <code>teams.read</code>, <code>teams.update</code>, <code>teams.delete</code>, <code>teams.join</code></td> </tr> </tbody> </table> <h3 id=docker-compose-example>Docker Compose Example<a class=headerlink href=#docker-compose-example title="Permanent link">¬∂</a></h3> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=nt>services</span><span class=p>:</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>  </span><span class=nt>gateway</span><span class=p>:</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>    </span><span class=nt>environment</span><span class=p>:</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">MCPGATEWAY_BOOTSTRAP_ROLES_IN_DB_ENABLED=true</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">MCPGATEWAY_BOOTSTRAP_ROLES_IN_DB_FILE=/app/custom_roles.json</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">./custom_roles.json:/app/custom_roles.json:ro</span>
</span></code></pre></div> <h3 id=kuberneteshelm-example>Kubernetes/Helm Example<a class=headerlink href=#kuberneteshelm-example title="Permanent link">¬∂</a></h3> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=c1># values.yaml</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=nt>mcpContextForge</span><span class=p>:</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>  </span><span class=nt>env</span><span class=p>:</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>    </span><span class=nt>MCPGATEWAY_BOOTSTRAP_ROLES_IN_DB_ENABLED</span><span class=p>:</span><span class=w> </span><span class=s>"true"</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=nt>MCPGATEWAY_BOOTSTRAP_ROLES_IN_DB_FILE</span><span class=p>:</span><span class=w> </span><span class=s>"/config/custom_roles.json"</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>  </span><span class=c1># Mount ConfigMap with role definitions</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>  </span><span class=nt>extraVolumes</span><span class=p>:</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">custom-roles</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>      </span><span class=nt>configMap</span><span class=p>:</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mcp-gateway-roles</span>
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a><span class=w>  </span><span class=nt>extraVolumeMounts</span><span class=p>:</span>
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">custom-roles</span>
</span><span id=__span-14-14><a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a><span class=w>      </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/config</span>
</span></code></pre></div> <h3 id=error-handling>Error Handling<a class=headerlink href=#error-handling title="Permanent link">¬∂</a></h3> <ul> <li><strong>File not found</strong>: Bootstrap continues with default roles only; warning logged</li> <li><strong>Invalid JSON</strong>: Bootstrap continues with default roles only; error logged</li> <li><strong>Malformed entries</strong>: Invalid role entries are skipped with warnings; valid entries are processed</li> </ul> <div class="admonition tip"> <p class=admonition-title>Idempotent Bootstrap</p> <p>Bootstrap is idempotent - running it multiple times won't duplicate roles. Existing roles are detected and skipped.</p> </div> <hr> <h2 id=related-documentation>Related Documentation<a class=headerlink href=#related-documentation title="Permanent link">¬∂</a></h2> <ul> <li><a href=../teams/ >Team Management</a> - Setting up teams and SSO mapping</li> <li><a href=../securing/ >Security Features</a> - Comprehensive security configuration</li> <li><a href=../configuration/ >Configuration Reference</a> - Environment variables</li> <li><a href=../api-usage/ >API Usage</a> - Token usage in API calls</li> </ul> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 10, 2026 17:50:23 UTC">February 10, 2026</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Contributors> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9 3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3 3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3 3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.54 5.54 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13zM0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9-.59.68-.95 1.62-.95 2.65V20zm24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65 2.56.34 4.45 1.51 4.45 2.9z"></path></svg> </span> <nav> <a href=mailto:crivetimihai@gmail.com>Mihai Criveti</a>, <a href=mailto:31662338+kknithin@users.noreply.github.com>Nithin Katta</a>, <a href=mailto:66672470+rakdutta@users.noreply.github.com>rakdutta</a> </nav> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Apache 2.0 </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/IBM/mcp-context-forge target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.feedback", "content.code.annotate", "content.code.copy", "navigation.indexes", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.share", "search.suggest", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>